(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{407:function(e,t,a){e.exports=a.p+"static/media/nodata.ad17058e.svg"},408:function(e,t,a){e.exports=a.p+"static/media/void.c7678f08.svg"},445:function(e,t,a){e.exports=a(792)},450:function(e,t,a){},451:function(e,t,a){},475:function(e,t,a){},478:function(e,t){},480:function(e,t){},508:function(e,t){},509:function(e,t){},620:function(e,t){},789:function(e,t,a){},790:function(e,t,a){},791:function(e,t,a){},792:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),i=a(71),c=a.n(i),o=a(6),u=(a(450),a(24)),s=(a(451),a(849)),d=a(869),m=a(871),p=a(33),f=a(39),b=a(883),g=a(806),E=a(878),v=a(879),h=a(884),x=a(381),j=a.n(x),O=a(383),y=a.n(O),S=a(385),k=a.n(S),C=a(384),w=a.n(C),N=a(386),T=a.n(N),z=a(387),A=a.n(z),I=a(388),_=a.n(I),q=a(389),F=a.n(q),R=a(245),D=a.n(R),P=a(19),W=a(4),B=a(20),M=a.n(B),V=a(31),L=a(23),H=a(32),U=a.n(H),Q=Object(L.b)("assujetti/entreprise-data",Object(V.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/user");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))),G=Object(L.d)({name:"assujetti",initialState:{assujetti:null,user:null,auth:!1,status:"idle"},extraReducers:(n={},Object(W.a)(n,Q.pending,function(e){e.status="loading"}),Object(W.a)(n,Q.fulfilled,function(e,t){e.status="fulfilled";var a=t.payload;a&&a.connected&&(e.user=a.user,e.assujetti=a.assujetti,e.auth=!0)}),Object(W.a)(n,Q.rejected,function(e,t){e.status="failed",e.error=t.payload,e.user=null,e.assujetti=null,e.auth=!1}),n)}),J=(G.actions,G.reducer),$=function(e){return e.assujetti.assujetti},X=function(e){return e.assujetti.user},Y=function(e){return e.assujetti.auth},K=function(e){return e.assujetti.status};function Z(e,t){var a=e,n=t;return a=new Date(a).valueOf(),n=new Date(n).valueOf(),isFinite(a)&&isFinite(n)?(a>n)-(a<n):NaN}var ee=function(){var e=window.location.href,t=e.slice(0,e.indexOf("//")+2),a=e.slice(t.length).split(":");return console.log(a),a.length<=1&&(a=e.slice(t.length).split("/")),console.log(a[0]),t+a[0]+"/php"},te=function(e){return e.toLocaleString("fr")},ae=function(e,t,a){var n=e/t;return"number"===a?n:te(n)};function ne(){var e=Object(P.c)(X),t=Object(P.c)($),a=Object(f.a)(),n=Object(r.useState)(!1),i=Object(o.a)(n,2),c=i[0],u=i[1],d=function(e){(!e||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&u(!c)};return l.a.createElement("div",{className:"appbar",style:{backgroundColor:a.palette.grey[200],padding:a.spacing(1,2),borderBottom:"2px solid "+a.palette.primary.light}},l.a.createElement(s.a,{display:"flex",alignItems:"center"},l.a.createElement(b.a,{sx:{mr:2},onClick:d},l.a.createElement(D.a,{fontSize:"small"})),c&&l.a.createElement(se,{open:c,toggleMenu:d,assujetti:t}),l.a.createElement(g.a,{color:"primary",variant:"h1",sx:{fontWeight:500}},"DEF | RDC")),l.a.createElement(re,{theme:a,user:e}))}var re=function(e){var t=e.user;return l.a.createElement("div",{className:"user"},l.a.createElement(E.a,{style:{width:25,height:25,color:"#000"}}),l.a.createElement("div",{className:"user-detailes"},l.a.createElement(g.a,{variant:"caption"},t&&l.a.createElement("span",null,t.prenom))),l.a.createElement(j.a,{fontSize:"small",color:"inherit"}))},le=Object(d.a)("div")(function(){return{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between"}}),ie=Object(d.a)("div")(function(){return{width:300,padding:"20px 10px"}}),ce=Object(d.a)("div")(function(){return{display:"flex",flexDirection:"column",padding:"20px 0"}}),oe=Object(d.a)("div")(function(e){return{padding:"10px 7px",display:"flex",alignItems:"center",cursor:"pointer",width:"fit-content",borderRadius:5,transition:"all .2s","&:not(:last-child)":{marginBottom:7},"& > svg":{marginRight:10},"& > span":{fontSize:14},"&.menu-card:hover":{boxShadow:e.theme.shadows[1],padding:"10px 20px"}}}),ue=Object(d.a)("div")(function(){return{position:"absolute",bottom:0,left:0,right:0,"& > .copy-right":{display:"block",fontSize:14,padding:"15px 10px"}}}),se=function(e){var t=e.open,a=e.assujetti,n=e.toggleMenu;return l.a.createElement(m.a,{anchor:"left",open:t,onClose:n,onOpen:n,BackdropProps:{style:{backgroundColor:"rgba(0, 0, 0, 0)"}}},l.a.createElement(ie,null,l.a.createElement(le,null,l.a.createElement(b.a,{sx:{mr:2},onClick:n},l.a.createElement(D.a,{fontSize:"small"})),l.a.createElement("a",{href:ee()},l.a.createElement(v.a,{endIcon:l.a.createElement(y.a,null),color:"primary",variant:"text"},"Accueil"))),l.a.createElement(s.a,null,l.a.createElement(ce,null,l.a.createElement(g.a,{variant:"h1",sx:{mb:3,fontWeight:600,pl:1}},"Modules du DEF"),l.a.createElement(oe,{className:"menu-card"},l.a.createElement(w.a,{color:"success"}),l.a.createElement(g.a,{variant:"caption"},"Gestion des commandes")),l.a.createElement(p.b,{to:"/stock",target:"_blank"},l.a.createElement(oe,{className:"menu-card"},l.a.createElement(k.a,{color:"secondary"}),l.a.createElement(g.a,{variant:"caption"},"Gestion des stocks"))),l.a.createElement(p.b,{to:"/facturation",target:"_blank"},l.a.createElement(oe,{className:"menu-card"},l.a.createElement(T.a,{color:"default"}),l.a.createElement(g.a,{variant:"caption"},"Vente et facturation"))),l.a.createElement(oe,{className:"menu-card"},l.a.createElement(A.a,{color:"primary"}),l.a.createElement(g.a,{variant:"caption"},"Comptabilit\xe9 et caisse")),l.a.createElement(oe,{className:"menu-card"},l.a.createElement(_.a,{color:"info"}),l.a.createElement(g.a,{variant:"caption"},"Partenaires de commerce"))))),l.a.createElement(ue,null,l.a.createElement(oe,null,l.a.createElement(F.a,{color:"info"}),l.a.createElement(g.a,{variant:"caption"},a.raison_sociale)),l.a.createElement(h.a,null),l.a.createElement(g.a,{variant:"caption",className:"copy-right",color:"GrayText"},"\xa9 DGI RDC tous droits reserv\xe9s.")))},de=a(74),me=a(413),pe=a(870),fe=["onChange"],be=["label","value","onChange","name","id","variant"],ge=r.forwardRef(function(e,t){var a=e.onChange,n=Object(de.a)(e,fe);return r.createElement(me.a,Object.assign({},n,{mask:"00/00/0000",definitions:{"#":/[1-9]/},inputRef:t,onAccept:function(t){return a({target:{name:e.name,value:t}})},overwrite:!0}))});var Ee,ve=r.memo(function(e){var t=e.label,a=e.value,n=e.onChange,l=e.name,i=e.id,c=e.variant,o=Object(de.a)(e,be);return r.createElement(pe.a,Object.assign({},o,{label:t,value:a,onChange:n,name:l||"numberformat",id:i,InputProps:{inputComponent:ge},variant:c||"standard"}))}),he=a(17),xe=a(9),je=a(889),Oe=a(891),ye=a(856),Se=a(246),ke=a(888),Ce=a(890),we=a(876),Ne=a(887),Te=a(22),ze=Object(L.c)({selectId:function(e){return e.id}}),Ae=ze.getInitialState({status:"idle",venteRequestStatus:"idle",errors:null,categories:[]}),Ie=(Object(L.b)("produits/get-categories-produit",function(){var e=Object(V.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/api/produits/categories",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Object(L.b)("produits/get-categories-produit",Object(V.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/produits/categories");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)})))),_e=Object(L.b)("produits/get-for-entreprise",Object(V.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/produits");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))),qe=Object(L.b)("produits/get-for-entreprise-vente",Object(V.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/ventes/data");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))),Fe=Object(L.b)("produits/creer",function(){var e=Object(V.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,e.next=3,U.a.post("/api/produits",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Re=Object(L.d)({name:"produit",initialState:Ae,reducers:{initError:function(e){e.errors=null},appendCategorie:function(e,t){t.payload&&(e.categories=[].concat(Object(Te.a)(e.categories),[t.payload]))}},extraReducers:(Ee={},Object(W.a)(Ee,Ie.pending,function(e){e.status="loading"}),Object(W.a)(Ee,Ie.fulfilled,function(e,t){e.status="fulfilled",e.categories=t.payload}),Object(W.a)(Ee,Ie.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Object(W.a)(Ee,_e.pending,function(e){e.status="loading"}),Object(W.a)(Ee,_e.fulfilled,function(e,t){e.status="fulfilled",ze.upsertMany(e,t.payload)}),Object(W.a)(Ee,_e.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Object(W.a)(Ee,qe.pending,function(e){e.venteRequestStatus="loading"}),Object(W.a)(Ee,qe.fulfilled,function(e,t){e.venteRequestStatus="fulfilled",ze.upsertMany(e,t.payload)}),Object(W.a)(Ee,qe.rejected,function(e,t){e.venteRequestStatus="failed",e.errors=t.payload}),Object(W.a)(Ee,Fe.pending,function(e){e.status="loading"}),Object(W.a)(Ee,Fe.fulfilled,function(e,t){if("success"===t.payload.state)e.status="fulfilled",ze.upsertOne(e,t.payload.produit);else{e.status="failed";var a=t.payload;a&&a.message?e.errors=a.message:e.errors="Une erreur est survenue lors de l'enregistrement du produit. Veuillez r\xe9esayer."}}),Object(W.a)(Ee,Fe.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Ee)}),De=Re.reducer,Pe=Re.actions,We=ze.getSelectors(function(e){return e.produits}),Be=We.selectAll,Me=(We.selectById,function(e){return e.produits.errors}),Ve=function(e){return e.produits.categories},Le=function(e,t,a){var n=Object.values(e.produits.entities);return t&&""!==t&&(n=Object.values(n).filter(function(e){return e.categorieProduitId===t})),"tous"===a?n:"dispo"===a?n.filter(function(e){return e.quantite>0}):"indispo"===a?n.filter(function(e){return e.quantite<=0}):"alert"===a?n.filter(function(e){return e.quantite<=e.quantite_min}):void 0},He=a(857),Ue=a(75),Qe=a(854),Ge=a(875),Je=function(e){var t=e.minWidth,a=e.sx,n=e.value,r=e.setValue,i=e.options,c=e.placeholder,o=e.label,u=e.textFieldXs,s=e.error,d=e.helperText;return l.a.createElement(Ge.a,{id:"combo-box",sx:Object(he.a)({minWidth:t||300},a),value:n,onChange:function(e,t){r(t)},popupIcon:l.a.createElement(Qe.a,null),options:i||[],isOptionEqualToValue:function(e,t){return e.id===t.id},autoHighlight:!0,getOptionLabel:function(e){return e.label},renderInput:function(e){return l.a.createElement(pe.a,Object.assign({placeholder:c||""},e,{label:o,sx:u,error:s,helperText:d}))}})},$e=l.a.memo(function(e){var t=e.mb,a=e.value,n=e.onChange,r=Object(Ue.a)(s.a)(function(e){return{border:"1px solid #eaeaea",borderRadius:5,padding:"6.5px 14px",display:"flex",alignItems:"center",width:"100%",backgroundColor:e.theme.palette.common.white}}),i=Object(Ue.a)("input")(function(){return{border:"none",outline:0,fontSize:15,flex:1,backgroundColor:"inherit"}});return l.a.createElement(r,{mb:null!==t||void 0!==t?t:2},l.a.createElement(i,{placeholder:"Rechercher...",className:"search-input",value:a,onChange:n}),l.a.createElement(Qe.a,{fontSize:"small",color:"disabled"}))}),Xe=a(855),Ye=Object(xe.a)("div")(function(){return{borderRadius:5}}),Ke=Object(xe.a)(Xe.a)(function(){return{display:"flex",alignItems:"center","&.top > div":{padding:"10px 0","& > *:last-child":{marginLeft:10}}}}),Ze=Object(xe.a)("div")(function(e){return{backgroundColor:e.theme.palette.primary.light,color:"#fff"}}),et=Object(xe.a)(v.a)(function(e){var t=e.theme;return{borderRadius:0,"&.active":{backgroundColor:t.palette.primary.main,color:t.palette.common.white}}}),tt=Object(xe.a)(ye.a)(function(e){var t,a=e.theme;return t={},Object(W.a)(t,"&.".concat(Se.a.head),{backgroundColor:a.palette.common.white,color:a.palette.common.black,fontSize:15,padding:"7px 10px"}),Object(W.a)(t,"&.".concat(Se.a.body),{fontSize:14,padding:"7px 10px","&.prodLink":{textDecoration:"none","&:hover":{textDecoration:"underline"}}}),t}),at=Object(xe.a)(Ne.a)(function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}});function nt(){var e=Object(P.c)(Ve)||[],t=Object(f.a)(),a=l.a.useState([]),n=Object(o.a)(a,2),i=n[0],c=n[1],u=Object(r.useState)(null),s=Object(o.a)(u,2),d=s[0],m=s[1],b=Object(r.useState)("tous"),E=Object(o.a)(b,2),h=E[0],x=E[1],j=Object(r.useState)(null),O=Object(o.a)(j,2),y=O[0],S=O[1],k=Object(P.c)(function(e){return Le(e,d?d.id:null,h)}),C=Object(P.b)(),w=function(e){x(e)};return Object(r.useEffect)(function(){e&&0!==e.length||C(Ie())},[C]),l.a.createElement(Ye,null,l.a.createElement("div",null,l.a.createElement(Ke,{className:"top",justifyContent:"space-between"},l.a.createElement(Ke,{className:"header"},l.a.createElement(Je,{options:k.map(function(e){return{label:e.designation,id:e.id}}),mb:0,value:y,setValue:function(e){return S(e)},placeholder:"Recherche...",sx:{minWidth:200},textFieldXs:{mt:0,mb:0}}),l.a.createElement(v.a,{variant:"outlined",color:"primary",size:"medium",disableElevation:!0,disabled:0===i.length},"Supprimer")),l.a.createElement(Ke,null,l.a.createElement(g.a,{variant:"caption"},"Cat\xe9gorie"),l.a.createElement(rt,{placeholder:"S\xe9lectionnez",options:e.map(function(e){return Object(he.a)({label:e.nom_categorie},e)}),value:d,setValue:function(e){return m(e)},sx:{minWidth:200},textFieldXs:{mt:0,mb:0}}))),l.a.createElement(Ze,null,l.a.createElement(et,{color:"inherit",className:"tous"===h&&"active",onClick:function(){return w("tous")}},"Tous"),l.a.createElement(et,{color:"inherit",className:"dispo"===h&&"active",onClick:function(){return w("dispo")}},"Disponnible"),l.a.createElement(et,{color:"inherit",className:"indispo"===h&&"active",onClick:function(){return w("indispo")}},"Indisponible"),l.a.createElement(et,{color:"inherit",className:"alert"===h&&"active",onClick:function(){return w("alert")}},"Alerte"))),l.a.createElement(ke.a,{style:{marginTop:10}},l.a.createElement(je.a,{sx:{minWidth:700},size:"small","aria-label":"customized table"},l.a.createElement(Ce.a,null,l.a.createElement(Ne.a,null,l.a.createElement(tt,{padding:"checkbox"},l.a.createElement(we.a,{color:"primary",indeterminate:i.length>0&&i.length<k.length,checked:k.length>0&&i.length===k.length,onChange:function(e){if(e.target.checked){var t=k.map(function(e){return e.id});c(t)}else c([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(tt,null,"Code"),l.a.createElement(tt,null,"D\xe9signation"),l.a.createElement(tt,null,"Cat\xe9gorie"),l.a.createElement(tt,null,"Unit\xe9"),l.a.createElement(tt,{align:"right"},"Quantit\xe9"),l.a.createElement(tt,{align:"right"},"Q. min"),l.a.createElement(tt,{align:"right"},"Marge"))),l.a.createElement(Oe.a,null,k&&k.map(function(e,a){var n,r=(n=e.id,-1!==i.indexOf(n));return l.a.createElement(at,{key:e.id},l.a.createElement(tt,{padding:"checkbox"},l.a.createElement(we.a,{size:"small",color:"primary",checked:r,onChange:function(t){return function(e,t){var a=i.indexOf(t),n=[];-1===a?n=n.concat(i,t):0===a?n=n.concat(i.slice(1)):a===i.length-1?n=n.concat(i.slice(0,-1)):a>0&&(n=n.concat(i.slice(0,a),i.slice(a+1))),c(n)}(0,e.id)},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(tt,null,e.code_produit),l.a.createElement(tt,{style:{color:t.palette.primary.main},className:"prodLink",component:"th",scope:"row"},l.a.createElement(p.b,{to:e.id,style:{textDecoration:"inherit"}},e.designation)),l.a.createElement(tt,null,e.categorie_produit?e.categorie_produit.code_categorie:""),l.a.createElement(tt,null,e.unite),l.a.createElement(tt,{align:"right",sx:{display:"flex",alignItems:"center",justifyContent:"end",width:"100%",padding:"8px 14px",fontSize:"15px!important"}},e.quantite,parseFloat(e.quantite)<=parseFloat(e.quantite_min)&&l.a.createElement(He.a,{sx:{fontSize:"1rem",mr:1},fontSize:"small",color:"secondary"})),l.a.createElement(tt,{align:"right"},e.quantite_min),l.a.createElement(tt,{align:"right"},e.marge,"%"))}),l.a.createElement(at,{style:{height:35}},l.a.createElement(tt,{align:"center"}),l.a.createElement(tt,{align:"center"}),l.a.createElement(tt,{component:"th",scope:"row"}),l.a.createElement(tt,null),l.a.createElement(tt,{align:"right"}),l.a.createElement(tt,{align:"right"}),l.a.createElement(tt,{align:"right"}),l.a.createElement(tt,{align:"right"}))))))}var rt=r.memo(function(e){var t=e.options,a=e.label,n=e.minWidth,l=e.value,i=e.setValue,c=e.placeholder,o=e.textFieldXs,u=e.error,s=e.helperText,d=e.sx,m=e.disabled;return r.createElement(Ge.a,{id:"combo-box",sx:Object(he.a)({minWidth:n||300},d),disabled:m,value:l,onChange:function(e,t){i(t)},options:t||[],isOptionEqualToValue:function(e,t){return e.id===t.id},autoHighlight:!0,getOptionLabel:function(e){return e.label},renderInput:function(e){return r.createElement(pe.a,Object.assign({placeholder:c||""},e,{label:a,sx:o,error:u,helperText:s}))}})});a(475);var lt=a(892);function it(e){var t=e.message,a=e.sx,n=e.size;return l.a.createElement(s.a,{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",sx:a},l.a.createElement(g.a,{variant:"body1",color:"GrayText",sx:{mb:2}},t),l.a.createElement(lt.a,{size:n||40,color:"primary"}))}var ct=a(390),ot=["onChange","prefix","suffix"],ut=["prefix","suffix","variant","value","onChange","placeholder","label","maxLength"],st=r.forwardRef(function(e,t){var a=e.onChange,n=e.prefix,l=e.suffix,i=Object(de.a)(e,ot);return r.createElement(ct.a,Object.assign({},i,{getInputRef:t,onValueChange:function(t){a({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,prefix:n||"",suffix:l||""}))});var dt=r.memo(function(e){e.prefix,e.suffix;var t=e.variant,a=e.value,n=e.onChange,l=e.placeholder,i=e.label,c=e.maxLength,o=Object(de.a)(e,ut);return r.createElement(pe.a,Object.assign({},o,{label:i,placeholder:l,value:a,onChange:n,name:"numberformat",id:"formatted-numberformat-input",inputProps:{maxLength:c},InputProps:{inputComponent:st},variant:t}))}),mt=a(872),pt=a(893),ft=Object(xe.a)("span")(function(e){var t=e.theme;return{borderRadius:"50%",width:16,height:16,boxShadow:"dark"===t.palette.mode?"0 0 0 1px rgb(16 22 26 / 40%)":"inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)",backgroundColor:"dark"===t.palette.mode?"#394b59":"#f5f8fa",backgroundImage:"dark"===t.palette.mode?"linear-gradient(180deg,hsla(0,0%,100%,.05),hsla(0,0%,100%,0))":"linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))",".Mui-focusVisible &":{outline:"2px auto rgba(19,124,189,.6)",outlineOffset:2},"input:hover ~ &":{backgroundColor:"dark"===t.palette.mode?"#30404d":"#ebf1f5"},"input:disabled ~ &":{boxShadow:"none",background:"dark"===t.palette.mode?"rgba(57,75,89,.5)":"rgba(206,217,224,.5)"}}}),bt=Object(xe.a)(ft)({backgroundColor:"#137cbd",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))","&:before":{display:"block",width:16,height:16,backgroundImage:"radial-gradient(#fff,#fff 28%,transparent 32%)",content:'""'},"input:hover ~ &":{backgroundColor:"#106ba3"}});function gt(e){return r.createElement(mt.a,Object.assign({sx:{"&:hover":{bgcolor:"transparent"}},disableRipple:!0,color:"default",checkedIcon:r.createElement(bt,null),icon:r.createElement(ft,null)},e))}var Et=r.memo(function(e){var t=e.label,a=e.disabled,n=e.value;return r.createElement(pt.a,{value:n,disabled:a,control:r.createElement(gt,null),label:t})}),vt=a(858),ht=a(896),xt=a(894),jt=a(895),Ot=a(859);function yt(e){var t=e.title,a=e.message,n=e.onAgree,l=e.disagreeBtnText,i=e.agreeBtnText,c=e.onDisagree,o=e.open,u=e.onClose,s=e.color;return r.createElement("div",null,r.createElement(vt.a,{open:o,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-message",color:s,sx:{"& .MuiDialog-container":{alignItems:"baseline"},"& h2":{fontSize:18,padding:"7px 10px"},"& .MuiDialogContent-root":{padding:"7px 10px"},"& p":{fontSize:14}}},r.createElement(Ot.a,{id:"alert-dialog-title"},t),r.createElement(xt.a,null,r.createElement(jt.a,{id:"alert-dialog-message"},a)),r.createElement(ht.a,null,l&&r.createElement(v.a,{onClick:c},l),i&&r.createElement(v.a,{onClick:n,autoFocus:!0},i))))}var St=a(21),kt=a(803);function Ct(){var e=Object(u.h)().numFacture,t=Object(r.useState)(null),a=Object(o.a)(t,2),n=a[0],i=a[1],c=Object(r.useState)(!0),s=Object(o.a)(c,2),d=s[0],m=s[1];return Object(r.useEffect)(function(){e&&U.a.get("/api/ventes/factures/".concat(e)).then(function(e){var t=e.data;console.log(t),t&&i(t)}).catch(function(e){console.log(e)}).finally(function(){m(!1)})},[e]),console.log(n),l.a.createElement(kt.a,{open:!0},l.a.createElement("div",{style:zt.frameContainer},d||!n?l.a.createElement(l.a.Fragment,null):l.a.createElement(St.PDFViewer,{width:"100%",height:"100%"},l.a.createElement(St.Document,null,l.a.createElement(St.Page,{style:zt.body},l.a.createElement(St.View,{style:zt.header},l.a.createElement(St.View,{style:zt.headerSide},l.a.createElement(St.Text,{style:zt.headerText},"Ste New Four Ways SARL-Mini"),l.a.createElement(St.Text,{style:zt.headerText},"DEF-012334"),l.a.createElement(St.Text,{style:zt.headerText},"Av: UBANGI NO.2 C/LEMBA"),l.a.createElement(St.Text,{style:zt.headerText},"0971178768 - 0890011442"),l.a.createElement(St.Text,{style:zt.headerText},"samkin1997@gmail.com"),l.a.createElement(St.Text,{style:zt.headerText},"RCCM 14-B-01702 IDNAT 01-F4300-N34731P"),l.a.createElement(St.Text,{style:zt.headerText},"NIMPOT A0909296Q")),l.a.createElement(St.View,{style:zt.headerSide},l.a.createElement(St.Text,{style:zt.headerText},"Ste New Four Ways SARL-Mini"),l.a.createElement(St.Text,{style:zt.headerText},"DEF-012334"),l.a.createElement(St.Text,{style:zt.headerText},"Av: UBANGI NO.2 C/LEMBA"),l.a.createElement(St.Text,{style:zt.headerText},"0971178768 - 0890011442"),l.a.createElement(St.Text,{style:zt.headerText},"samkin1997@gmail.com"),l.a.createElement(St.Text,{style:zt.headerText},"RCCM 14-B-01702 IDNAT 01-F4300-N34731P"),l.a.createElement(St.Text,{style:zt.headerText},"NIMPOT A0909296Q"))),l.a.createElement(St.View,{style:zt.alignH},l.a.createElement(St.Text,{style:[zt.text,{marginRight:10}]},"#",n.num_facture),l.a.createElement(St.Text,{style:[zt.text,{marginRight:10}]},new Date(n.date).toLocaleDateString()),l.a.createElement(St.Text,{style:zt.text},new Date(n.date).toLocaleTimeString())),l.a.createElement(St.View,{style:zt.table},l.a.createElement(wt,null),l.a.createElement(St.View,{style:zt.tabBody},n.produits.map(function(e){return l.a.createElement(Nt,{produit:e,key:e.designation})})),l.a.createElement(Tt,{totalHT:n.total_ht,tva:n.total_tva})))))))}var wt=function(){return l.a.createElement(St.View,{style:Object(he.a)(Object(he.a)({},zt.tabHeader),zt.tabRow)},l.a.createElement(St.Text,{style:Object(he.a)(Object(he.a)({},zt.tabCol),zt.designation)},"Article/Iteme"),l.a.createElement(St.Text,{style:Object(he.a)(Object(he.a)({},zt.tabCol),zt.pu)},"Prix U"),l.a.createElement(St.Text,{style:Object(he.a)(Object(he.a)({},zt.tabCol),zt.quantite)},"Qt\xe9"),l.a.createElement(St.Text,{style:Object(he.a)(Object(he.a)({},zt.tabCol),zt.total)},"Total"))},Nt=function(e){var t=e.produit;return l.a.createElement(St.View,{style:Object(he.a)({},zt.tabRow)},l.a.createElement(St.Text,{style:[zt.tabCol,zt.designation]},t.designation),l.a.createElement(St.Text,{style:Object(he.a)(Object(he.a)({},zt.tabCol),zt.pu)},t.prix_unitaire),l.a.createElement(St.Text,{style:[zt.tabCol,zt.quantite]},t.q_sortie),l.a.createElement(St.Text,{style:Object(he.a)(Object(he.a)({},zt.tabCol),zt.total)},t.total))},Tt=function(e){var t=e.totalHT,a=e.tva;return l.a.createElement(St.View,{style:zt.tabFooter},l.a.createElement(St.View,{style:zt.footerContent},l.a.createElement(St.View,{style:zt.labelContainer},l.a.createElement(St.Text,{style:zt.footerRow},"Total HT"),l.a.createElement(St.Text,{style:zt.footerRow},"TVA (16%)"),l.a.createElement(St.Text,{style:zt.footerRow},"Autres taxes"),l.a.createElement(St.Text,{style:[zt.footerRow,{fontWeight:"bold",fontSize:15,borderTopColor:"#333",borderStyle:"dashed",borderTopWidth:1,marginTop:10}]},"Total \xe0 payer")),l.a.createElement(St.View,{style:zt.valueContainer},l.a.createElement(St.Text,{style:zt.footerRow},t),l.a.createElement(St.Text,{style:zt.footerRow},a),l.a.createElement(St.Text,{style:zt.footerRow},"0"),l.a.createElement(St.Text,{style:[zt.footerRow,{fontWeight:"bold",fontSize:15,borderTopColor:"#333",borderStyle:"dashed",borderTopWidth:1,marginTop:10}]},t+a))))},zt=St.StyleSheet.create({frameContainer:{height:"100vh",width:"100vw"},body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},alignH:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:20},header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},headerSide:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},headerText:{fontSize:12,fontFamily:"Times-Roman"},text:{marginVertical:11,fontSize:12,fontFamily:"Times-Roman"},table:{marginTop:20,width:"100%"},tabHeader:{borderBottomColor:"#333",borderStyle:"dashed",borderBottomWidth:1,fontStyle:"bold"},tabRow:{display:"flex",flexDirection:"row"},designation:{paddingVertical:5,flexBasis:"40%",fontSize:12,fontFamily:"Times-Roman",textAlign:"left"},pu:{paddingVertical:5,flexBasis:"20%",fontSize:12,fontFamily:"Times-Roman",textAlign:"right"},quantite:{paddingVertical:5,flexBasis:"20%",fontSize:12,fontFamily:"Times-Roman",textAlign:"right"},total:{paddingVertical:5,flexBasis:"20%",fontSize:12,fontFamily:"Times-Roman",textAlign:"right"},tabFooter:{flexDirection:"row",borderTopColor:"#333",borderStyle:"dashed",borderTopWidth:1,justifyContent:"flex-end",paddingTop:10},footerContent:{flexDirection:"row",alignItems:"center",fontFamily:"Times-Roman"},footerRow:{fontSize:12,padding:3},labelContainer:{flexBasis:"20%",textAlign:"right"},valueContainer:{flexBasis:"20%",textAlign:"right"}}),At=a(886),It=["open","handleClose","anchorEl","children","anchorOrigin"];function _t(e){var t=e.open,a=e.handleClose,n=e.anchorEl,l=e.children,i=e.anchorOrigin,c=Object(de.a)(e,It),o=t?"menu-popover":void 0;return r.createElement(At.a,Object.assign({},c,{id:o,open:t,anchorEl:n,onClose:a,anchorOrigin:i||{vertical:"bottom",horizontal:"left"},BackdropProps:{sx:{backgroundColor:"rgba(0,0,0,0)"}}}),l)}var qt=a(877),Ft=a(873);function Rt(e){var t=e.autoHideDuration,a=Object(r.useContext)(ll),n=a.getFeedback,i=a.onClose,c=n(),o=c.openState,u=c.messageState,s=c.idState,d=c.typeState,m=function(e,t){"clickaway"!==t&&i()};return l.a.createElement("div",null,l.a.createElement(qt.a,{key:s,open:o,autoHideDuration:t||6e3,onClose:m,TransitionProps:{onExited:function(){i()}}},l.a.createElement(Ft.a,{onClose:m,severity:d||"info",sx:{width:"100%"},variant:"filled",elevation:6},u)))}var Dt=Object(L.d)({name:"configs",initialState:{taux:2e3,devise:"CDF",status:"idle"},reducers:{setTaux:function(e,t){e.taux=t.taux},setDevise:function(e,t){e.devise=t.devise}}}),Pt=(Dt.actions,Dt.reducer),Wt=function(e){return e.configs.taux},Bt=function(e){return e.configs.devise},Mt=Object(d.a)(s.a)(function(){return{display:"flex",flexDirection:"column",flex:1}}),Vt=Object(d.a)(g.a)(function(){return{display:"flex",alignItems:"center",color:"#666","&":{fontSize:14},"& .value":{fontSize:20,fontWeight:"600",marginLeft:10}}});function Lt(){var e=Object(P.c)(Wt),t=Object(P.c)(Bt);return l.a.createElement("div",{style:{marginTop:24}},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"Devise et taux"),l.a.createElement(Mt,{"aria-label":"provenance",name:"provenance des produits ou marchandises",value:t,className:"devise",sx:{display:"flex",flexDirection:"column",flex:1}},l.a.createElement(Vt,null,l.a.createElement("span",null,"Devise :  "),l.a.createElement("span",{className:"value"},t)),l.a.createElement(Vt,null,l.a.createElement("span",null,"Taux : "),l.a.createElement("span",{className:"value"},te(e),"Fc"))))}a(789);var Ht=a(399),Ut=a.n(Ht),Qt=a(398),Gt=a.n(Qt),Jt=function(){var e=Object(V.a)(M.a.mark(function e(t,a,n){var r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t)&&""!==r&&!(r.length<5)){e.next=3;break}return e.abrupt("return");case 3:if(!$t(r,a.num_def)){e.next=5;break}return e.abrupt("return");case 5:r=r.replaceAll("/","").replaceAll("-",""),n(!0),U.a.post("/api/assujetti/by_def/".concat(r),{numero_def:t}).then(function(e){var t=e.data;t.numero_def?n(!1,t,null):n(!1,null,t.message)}).catch(function(e){n(!1,null,e)});case 8:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),$t=function(e,t){return e===t};function Xt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=0,n=0,r=t,l=[],i=[],c=0,o=Object(Te.a)(e).sort(function(e,t){return Z(e.createdAt,t.createdAt)}),u=function(){var u=o[a];if(r-=u.quantite_entree,i=i.filter(function(e){return e.entreeId!==u.id}),r<0){var s=Math.abs(r);n=t,i.push({entreeId:u.id,q_sortie:n,q_entree:s})}else n=u.quantite_entree,i.push({entreeId:u.id,q_sortie:n,q_entree:0}),l=e.filter(function(e){return e.id!==u.id});c+=n*u.pv_unitaire,a++};r>0&&a<e.length;)u();return{prixTotal:c,entreeSortie:i,newEntrees:l}}function Yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=0,n=0;e.forEach(function(e){a=e.quantiteSortie+a,n+=e.prixTot}),t&&!isNaN(+t)&&(n*=1-+t/100);var r=.16*n;return{q:a,sousTotal:n,tva:r,netAPayer:n+r}}function Kt(e){var t=e.handleChangeClient,a=e.autreTaxes,n=e.setAutreTaxes,i=e.setDefValue,c=e.clientError,u=Object(P.c)($),s=Object(r.useState)(""),d=Object(o.a)(s,2),m=d[0],p=d[1],f=Object(r.useState)({}),b=Object(o.a)(f,2),E=b[0],v=b[1],x=Object(r.useState)(!1),j=Object(o.a)(x,2),O=j[0],y=j[1],S=Object(r.useState)("idle"),k=Object(o.a)(S,2),C=k[0],w=k[1],N=Object(r.useState)(null),T=Object(o.a)(N,2),z=T[0],A=T[1];return Object(r.useEffect)(function(){u&&$t(m,u.numero_def)?A("Op\xe9ration refus\xe9e."):A(null),w("idle"),setTimeout(function(){Jt(m,u.numero_def,function(e,a,n){y(e),v(a||{}),t(a,e),w(n?"unfound":"found")})},200)},[m,u,t]),Object(r.useEffect)(function(){""===m&&"idle"!==C&&w("idle")},[m,C]),l.a.createElement("div",{className:"default-values"},l.a.createElement("form",null,l.a.createElement(g.a,{variant:"h2",className:"block-title"},"Client"),l.a.createElement(Xe.a,{display:"flex",alignItems:"center",mb:1.5},l.a.createElement(pe.a,{variant:"outlined",label:"Num\xe9ro DEF",value:m,onChange:function(e){p(e.target.value),i(e.target.value)},placeholder:"Num\xe9ro DEF du client",sx:{mr:2},error:!(!c&&!z),helperText:c||z}),O?l.a.createElement(lt.a,{size:12,color:"primary"}):l.a.createElement(l.a.Fragment,null,"found"===C&&l.a.createElement(Gt.a,{fontSize:"small",color:"success"}),"unfound"===C&&l.a.createElement(Ut.a,{fontSize:"small",color:"error"}))),l.a.createElement(g.a,{variant:"caption",className:"small",style:{display:"block"}},"D\xe9nomination solciale du client"),l.a.createElement("div",{className:"denomination"},l.a.createElement(g.a,{variant:"caption"},E.raison_sociale))),l.a.createElement(h.a,{sx:{mt:2,mb:2}}),l.a.createElement(Lt,null),l.a.createElement(h.a,{sx:{mt:2,mb:2}}),l.a.createElement(Xe.a,{mt:2},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"Taxes"),l.a.createElement("ul",{className:"taxes"},l.a.createElement("li",{className:"taxe"},l.a.createElement(g.a,{variant:"subtitle2",className:"small"},"TVA : ",l.a.createElement("span",{className:"tva"},"16%"))),l.a.createElement("li",{className:"taxe autre-taxe"},l.a.createElement(g.a,{variant:"subtitle2",className:"small"},"Autre taxe :"),l.a.createElement(dt,{suffix:"%",value:a,onChange:function(e){return n(e.target.value)},label:"Taxe en %",maxLength:parseFloat(a)>100?3:7,error:parseFloat(a)>100,helperText:parseFloat(a)>100&&"Le pourcentage ne doit pas d\xe9passer 100"})))))}var Zt,ea=a(143),ta=a.n(ea),aa=a(400),na=a.n(aa),ra=Object(L.c)({selectId:function(e){return e.id}}),la=ra.getInitialState({status:"idle",errors:null,count:null}),ia=Object(L.b)("ventes/nouvelle vente",function(){var e=Object(V.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/api/ventes",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),ca=Object(L.b)("ventes/nombre des ventes",Object(V.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/ventes/count");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))),oa=Object(L.d)({name:"vente",initialState:la,reducers:{addFactureCourante:function(e,t){e.factureRecente=t.payload}},extraReducers:(Zt={},Object(W.a)(Zt,ca.pending,function(e){e.status="loading"}),Object(W.a)(Zt,ca.fulfilled,function(e,t){e.status="fulfilled",e.count=t.payload.count}),Object(W.a)(Zt,ca.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Object(W.a)(Zt,ia.pending,function(e){e.status="loading"}),Object(W.a)(Zt,ia.fulfilled,function(e,t){if("success"===t.payload.state){e.status="fulfilled";var a=Object(he.a)(Object(he.a)({},t.payload.facture),{},{ventes:t.payload.ventes});e.factureRecente=a}else e.status="fulfilled",e.errors=t.payload}),Object(W.a)(Zt,ia.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Zt)}),ua=oa.reducer,sa=(oa.actions,ra.getSelectors(function(e){return e.ventes})),da=(sa.selectAll,sa.selectById,function(e){return e.ventes.status}),ma=function(e){return e.ventes.count},pa=Object(xe.a)("div")(function(e){e.theme;return{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),padding:"0px 0px 0px 10px",fontWeight:600,"&.body":{backgroundColor:"#fff",display:"flex",alignItems:"center",border:"1px solid #eaeaea",justifyContent:"space-between"},"&.body > span":{fontSize:13,padding:"5px 10px",backgroundColor:"#eaeaea",minWidth:43.94},"&.qt":{padding:"5px 10px"},"&.header":{textAlign:"right",padding:"5px 0px"},"&.total":{fontSize:25},"&.total.body > span":{fontSize:20}}}),fa=Object(xe.a)("input")(function(){return{fontSize:16,border:"none",outline:"none"}}),ba=Object(xe.a)("div")(function(){return{display:"flex",flexDirection:"column",width:"100%",textAlign:"left","&.body":{border:"1px solid #eaeaea",borderRadius:5,marginLeft:15},"&:last-child td, &:last-child th":{border:0}}}),ga=Object(xe.a)("div")(function(){return{display:"flex",alignItems:"center",maxWidth:400,"&.total":{width:"100%",marginTop:20}}});function Ea(e){var t=e.qT,a=e.sT,n=e.tva,r=e.nP,i=e.devise,c=e.remise,o=e.setRemise;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ga,null,l.a.createElement(ba,{className:"header"},l.a.createElement(pa,{className:"header"},"Quantit\xe9 totale"),l.a.createElement(pa,{className:"header"},"Sous-total(H.T)"),l.a.createElement(pa,{className:"header"},"R\xe9mise"),l.a.createElement(pa,{className:"header center"},"T.V.A (16%)")),l.a.createElement(ba,{className:"body"},l.a.createElement(pa,{className:"body qt"},t),l.a.createElement(pa,{className:"body"},te(a),l.a.createElement("span",null,i)),l.a.createElement(pa,{className:"body"},l.a.createElement(fa,{disabled:!0,value:c,onChange:function(e){return o(e.target.value)},placeholder:"Remise globale (0)"}),l.a.createElement("span",null,"%")),l.a.createElement(pa,{className:"body"},te(n),l.a.createElement("span",null,i)))),l.a.createElement(ga,{className:"total"},l.a.createElement(ba,{className:"header total"},l.a.createElement(pa,{className:"header total"},"Net \xe0 payer")),l.a.createElement(ba,{className:"body total"},l.a.createElement(pa,{className:"body total"},te(r),l.a.createElement("span",null,i)))))}var va,ha=a(874),xa=Object(xe.a)("div")(function(e){var t,a=e.theme;return t={fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),padding:"10px 10px"},Object(W.a)(t,"&.header",{backgroundColor:a.palette.primary.light,color:a.palette.common.white,padding:"5px 10px"}),Object(W.a)(t,"&.body",{fontSize:16,padding:"10px 10px"}),Object(W.a)(t,"&.right",{textAlign:"right"}),Object(W.a)(t,"&.left",{textAlign:"left"}),Object(W.a)(t,"&.center",{textAlign:"center"}),t}),ja=Object(xe.a)(ha.a)(function(e){var t=e.theme;return{display:"flex",alignItems:"center",cursor:"pointer",width:"100%",textAlign:"left","&.header":{backgroundColor:"".concat(t.palette.primary.light,"!important")},"&:nth-of-type(odd)":{backgroundColor:t.palette.grey[100],boxShadow:"0px 1px 0px 0px rgb(0 0 0 / 20%)"},"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:t.palette.action.focus},"&>div":{width:"25%"},"&>div:first-of-type":{width:"40%"},"&>div:last-child":{width:"10%"}}}),Oa=["produit","produits","onChange","singleValue","onSingleChange"],ya=Object(xe.a)("div")(function(e){var t,a=e.theme;return t={fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},Object(W.a)(t,"&.header",{backgroundColor:a.palette.primary.main,color:a.palette.common.white,padding:"5px 2px"}),Object(W.a)(t,"&.body:not(:last-child)",{fontSize:16,border:"1px solid #eaeaea",padding:"4px 10px"}),Object(W.a)(t,"&.right",{textAlign:"right"}),Object(W.a)(t,"&.left",{textAlign:"left"}),Object(W.a)(t,"&.center",{textAlign:"center"}),t}),Sa=Object(xe.a)("input")(function(e){e.theme;return{fontSize:16,padding:"6px 10px",border:"1px solid #eaeaea",outline:"none"}}),ka=Object(xe.a)("div")(function(e){var t=e.theme;return{display:"flex",alignItems:"center",width:"100%",textAlign:"left","&.header":{backgroundColor:"".concat(t.palette.primary.main,"!important")},"&:last-child td, &:last-child th":{border:0},"&>*":{width:"25%"},"&>div:first-of-type ":{width:"40%"},"&>div:last-child":{width:"fit-content"},"&.body > div:first-of-type > div > div":{padding:"2px 6px"}}}),Ca=function(e){var t=e.produit,a=e.produits,n=e.onChange,i=e.singleValue,c=e.onSingleChange,u=Object(de.a)(e,Oa),s=Object(r.useState)(0),d=Object(o.a)(s,2),m=d[0],p=d[1];return l.a.useEffect(function(){t&&p(t.quantiteSortie)},[t]),l.a.useEffect(function(){null===i&&void 0===i||t||p(i)},[t,i]),l.a.createElement(Sa,Object.assign({},u,{inputMode:"numeric",type:"number",value:m,maxLength:10,onChange:function(e){var r=parseFloat(e.target.value>0?e.target.value:0);if(t&&e.target.value>=0){var l=a.find(function(e){return e.id===t.id});if(l&&r>l.quantite)return;p(e.target.value),"function"===typeof n&&n(t.id,r),"function"===typeof c&&c(r)}}}))},wa=function(e,t,a,n){var r=!0,l={};return e||""===t&&null===t&&void 0===t||(r=!1,l.client="Le num\xe9ro DEF du client est invalide"),(!a||""===a||+a<=0)&&(r=!1,l.taux="Le taux de vente est r\xe9quis en Fc"),"USD"!==n&&"CDF"!==n&&(r=!1,l.devise="Sp\xe9cifiez la devise"),{valid:r,errors:l}},Na=function(e){var t=!0,a=null;return e&&0!==e.length?(t=!e.some(function(e){return e.quantiteSortie<=0}))||(a="Toutes les quantit\xe9s doivent \xeatre superieur \xe0 z\xe9ro."):(a="S\xe9l\xe9ctionnez au moins un produit.",t=!1),{valid:t,error:a}};function Ta(e){var t=e.open,a=e.closeHandler,n=e.submitHandler,i=e.numFacture,c=e.devise,u=e.assujetti,s=Object(P.c)(Be),d=Object(r.useState)(s),m=Object(o.a)(d,2),p=m[0],f=m[1],b=Object(r.useState)([]),E=Object(o.a)(b,2),x=E[0],j=E[1],O=Object(r.useState)(0),y=Object(o.a)(O,2),S=y[0],k=y[1],C=Object(r.useState)(0),w=Object(o.a)(C,2),N=w[0],T=w[1],z=Object(r.useState)(0),A=Object(o.a)(z,2),I=A[0],_=A[1],q=Object(r.useState)(0),F=Object(o.a)(q,2),R=F[0],D=F[1],W=Object(r.useState)([]),B=Object(o.a)(W,2),M=B[0],V=B[1],L=Object(r.useState)({alert:!1,message:""}),H=Object(o.a)(L,2),U=H[0],Q=H[1],G=Object(r.useState)(0),J=Object(o.a)(G,2),$=J[0],X=J[1],Y=Object(r.useState)(null),K=Object(o.a)(Y,2),Z=K[0],ee=K[1],ae="loading"===Object(P.c)(da),ne=Object(r.useState)(null),re=Object(o.a)(ne,2),le=re[0],ie=re[1],ce=Object(r.useState)(0),oe=Object(o.a)(ce,2),ue=oe[0],se=oe[1],de=Object(r.useState)(0),me=Object(o.a)(de,2),pe=me[0],fe=me[1],be=function(){Q(!0)},ge=function(e){var t=[];if(e||0===e){var a=x.find(function(t,a){return a===e});a&&f([].concat(Object(Te.a)(p),[a])),t=x.filter(function(t,a){return a!==e})}j(t)},Ee=function(e,t){var a=s.find(function(t){return t.id===e}),n=parseFloat(t);if(n>a.quantite)Q({alert:!0,message:"Le stock est \xe9puis\xe9!"});else{var r=x.find(function(t){return t.id===e});if(r){r.quantiteSortie=n;var l=Xt(r.entrees,r.quantiteSortie),i=l.prixTotal,c=l.entreeSortie;r.prixTot=i,r.venteStock=c;var o=Yt(x),u=o.q,d=o.sousTotal,m=o.tva,p=o.netAPayer;k(u),T(d),_(m),D(p)}}},ve=Object(P.b)();return Object(r.useEffect)(function(){0===s.length&&u&&(ve(qe(u.id)),f(s))},[u,ve]),Object(r.useEffect)(function(){if(le){var e=Xt(le.entrees,parseFloat(ue)),t=e.prixTotal,a=e.entreeSortie;fe(t),V(a)}},[le,ue]),Object(r.useEffect)(function(){var e=Yt(x),t=e.q,a=e.sousTotal,n=e.tva,r=e.netAPayer;k(t),T(a),_(n),D(r)},[x]),l.a.createElement(kt.a,{open:t,onClose:a},l.a.createElement("div",{className:"content-container"},U.alert&&l.a.createElement(yt,{open:U.alert,title:"Alerte stock",message:U.message||"Stock de s\xe9curit\xe9 d\xe9j\xe0 atteint. Produit indisponible.",agreeBtnText:"Ok",onClose:be,onAgree:be}),Z&&l.a.createElement(yt,{open:!!Z,title:"Erreur",color:"warning",message:Z,agreeBtnText:"Ok",onClose:function(){return ee(null)},onAgree:function(){return ee(null)}}),l.a.createElement("header",null,l.a.createElement(g.a,null,"Facture ",i),l.a.createElement(Xe.a,{display:"flex",alignItems:"center"},l.a.createElement(v.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:function(){if(!ae){var e=Na(x),t=e.valid,a=e.error;if(ee(a),t){var r={facture:{net_payer:R,tva:I},ventes:x.map(function(e){return{q_sortie:e.quantiteSortie,prix_unitaire:e.prixTot/e.quantiteSortie,tva:.16*e.prixTot,produitId:e.id,venteStock:e.venteStock}})};n(r)}}},sx:{minWidth:113.19,height:36.5,mr:2}},ae?l.a.createElement(lt.a,{size:12,color:"inherit"}):"Enregistrer"),l.a.createElement(v.a,{variant:"outlined",color:"default",disableElevation:!0,disabled:ae,onClick:function(){j([]),a()}},"Annuler"))),l.a.createElement("div",{className:"inner-facturation-content"},l.a.createElement("div",{className:"produits-side"},l.a.createElement($e,null),l.a.createElement("div",{className:"product-list"},l.a.createElement(g.a,{variant:"caption",className:"small"},"Ces produits se trouvent dans le"," ",l.a.createElement("strong",null,"stock principal"),"."),l.a.createElement(h.a,{sx:{mt:2}}),l.a.createElement("div",{className:"produits-list"},l.a.createElement(ja,{className:"header"},l.a.createElement(xa,{className:"header"},"Produit"),l.a.createElement(xa,{className:"header"},"Prix unitaire"),l.a.createElement(xa,{className:"header center"},"Disponible"),l.a.createElement(xa,{className:"header center"})),s.map(function(e){return l.a.createElement(ja,{key:e.id,onClick:function(){return function(e){if(0!==e.quantite){var t=Object(he.a)(Object(he.a)({},e),{},{quantiteSortie:0,prixTot:0,venteStock:[]}),a=[].concat(Object(Te.a)(x),[t]),n=x.find(function(t){return t.id===e.id});if(n){if(n.quantiteSortie>=e.quantite)return void Q({alert:!0,message:"Le stock est \xe9puis\xe9!"});n.quantiteSortie=n.quantiteSortie+1;var r=Xt(n.entrees,n.quantiteSortie),l=r.prixTotal,i=r.entreeSortie;n.prixTot=l,n.venteStock=i;var c=Yt(x),o=c.q,u=c.sousTotal,s=c.tva,d=c.netAPayer;k(o),T(u),_(s),D(d),a=[].concat(Object(Te.a)(x.filter(function(e){return e.id!==n.id})),[Object(he.a)({},n)])}j(a);var m=p.filter(function(t){return t.id!==e.id});f(m)}else Q({alert:!0,message:"Le stock est \xe9puis\xe9!"})}(e)}},l.a.createElement(xa,{className:"body"},e.designation),l.a.createElement(xa,{className:"body right"}),l.a.createElement(xa,{className:"body center"},e.quantite),l.a.createElement(xa,{className:"body"},e.unite))})))),l.a.createElement("div",{className:"produits-side"},l.a.createElement("div",{className:"selected-products"},l.a.createElement(ka,{className:"header"},l.a.createElement(ya,{className:"header"},"Produit"),l.a.createElement(ya,{className:"header"},"Quantit\xe9"),l.a.createElement(ya,{className:"header"},"Prix total"),l.a.createElement(ya,{className:"header center"},l.a.createElement(v.a,{tabIndex:1e3,size:"small",disableElevation:!0,variant:"contained",sx:{borderRadius:0,minWidth:"50px"},color:"primary",onClick:function(){return ge()}},l.a.createElement(ta.a,{fontSize:"small"})))),x.map(function(e,t){return l.a.createElement(ka,{className:"body",key:"".concat(e.id,"_").concat(t)},l.a.createElement(ya,{className:"body"},e.code_produit),l.a.createElement(Ca,{produit:e,produits:s,sx:{m:0},type:"multiple",onChange:Ee}),l.a.createElement(ya,{className:"body"},te(e.prixTot)),l.a.createElement(ya,{className:"body"},l.a.createElement(v.a,{tabIndex:t+s.length,size:"small",disableElevation:!0,variant:"contained",sx:{borderRadius:0,minWidth:"50px"},color:"primary",onClick:function(){return ge(t)}},l.a.createElement(ta.a,{fontSize:"small"}))))}),l.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),le&&ue>0){j([].concat(Object(Te.a)(x),[Object(he.a)(Object(he.a)({},le),{},{quantiteSortie:parseFloat(ue),prixTot:pe,venteStock:M})])),ie(null);var t=p.filter(function(e){return e.id!==le.id});f(t),se(0),fe(0)}}},l.a.createElement(ka,{className:"body new"},l.a.createElement(rt,{minWidth:"40%",value:le,setValue:function(e){0===e.quantite||e.quantite<e.q_min||ie(e?Object(he.a)(Object(he.a)({},e),{},{quantiteSortie:parseFloat(ue),prixTot:0,venteStock:[]}):null)},options:p.map(function(e){return Object(he.a)({label:e.designation},e)}),textFieldXs:{padding:0,margin:0}}),l.a.createElement(Ca,{produit:le,singleValue:ue,produits:s,onSingleChange:function(e){return se(e)},sx:{m:0}}),l.a.createElement(ya,{className:"body"},te(pe)),l.a.createElement(ya,{className:"body"},l.a.createElement(v.a,{tabIndex:1e3,size:"small",disableElevation:!0,variant:"contained",type:"submit",sx:{borderRadius:0,minWidth:"50px"},color:"primary"},l.a.createElement(na.a,{fontSize:"small"})))))),l.a.createElement(Xe.a,{mt:3,display:"flex",alignItems:"flex-end",flexDirection:"column"},l.a.createElement(Ea,{qT:S,sT:N,tva:I,nP:R,devise:c,remise:$,setRemise:X}))))))}var za=Object(L.c)({selectId:function(e){return e.id}}).getInitialState({error:null,status:"idle",currentFacture:null,printFacture:null}),Aa=(Object(L.b)("facture/get all",Object(V.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))),Object(L.b)("facture/get current",Object(V.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/ventes/facture_recente");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)})))),Ia=Object(L.d)({name:"facture",initialState:za,reducers:{setCurrentFacture:function(e,t){var a=t.payload;e.currentFacture=a},setPrintFacture:function(e,t){var a=t.payload;e.printFacture=a}},extraReducers:(va={},Object(W.a)(va,Aa.pending,function(e,t){e.status="idle"}),Object(W.a)(va,Aa.fulfilled,function(e,t){var a=t.payload;a&&a.facture&&(e.currentFacture=t.payload.facture),e.status="fulfilled"}),Object(W.a)(va,Aa.rejected,function(e,t){e.status="failed"}),va)}),_a=Ia.actions,qa=Ia.reducer,Fa=function(e){return e.factures.currentFacture},Ra=function(){var e=Object(P.c)(Be),t=Object(r.useState)(!1),a=Object(o.a)(t,2),n=a[0],l=a[1],i=Object(P.b)(),c=Object(r.useCallback)(Object(V.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,i(qe());case 3:return e.next=5,i(ca());case 5:l(!1);case 6:case"end":return e.stop()}},e)})),[i]);return Object(r.useEffect)(function(){c()},[c]),{data:e,loading:n}},Da=function(){return Object(P.c)(ma)+1},Pa=a(802),Wa=a(402),Ba=a.n(Wa),Ma=a(401),Va=a.n(Ma);function La(){var e=Object(P.c)(Fa),t=Object(Ue.a)("div")(function(){return{marginTop:30,"& > h2":{marginBottom:10}}}),a=Object(Ue.a)("div")(function(e){return{backgroundColor:"#fff",borderRadius:7,minWidth:"200px",maxWidth:"350px","& > span":{padding:e.theme.spacing(1,2),display:"flex",alignItems:"center"}}}),n=Object(Ue.a)("div")(function(e){return{display:"flex",alignItems:"cente",justifyContent:"space-between",width:"100%","& > span":{padding:e.theme.spacing(1,2),display:"flex",alignItems:"center"}}}),r=Object(Ue.a)("div")(function(e){var t=e.theme;return{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),padding:t.spacing(1,2),display:"flex",alignItems:"center","& > ul":{"& > li":{padding:t.spacing(.7,0),minHeight:32.19}},"& > ul:first-of-type":{marginRight:20}}});return l.a.createElement(Pa.a,{in:!0},l.a.createElement(t,null,l.a.createElement(g.a,{variant:"h2"},"Facture r\xe9cente"),e?l.a.createElement(a,null,l.a.createElement(n,null,l.a.createElement("span",null,l.a.createElement(g.a,{variant:"caption"},"#",e.num_facture)),l.a.createElement("span",null,l.a.createElement(g.a,{variant:"caption"},l.a.createElement("span",null,new Date(e.date).getHours())," ",":",l.a.createElement("span",null," ",new Date(e.date).getMinutes()))),l.a.createElement("span",null,l.a.createElement("a",{href:"/facture/".concat(e.num_facture),rel:"noopener noreferrer",target:"_blank"},l.a.createElement(b.a,null,l.a.createElement(Va.a,{fontSize:"small"}))),l.a.createElement(b.a,null,l.a.createElement(Ba.a,{fontSize:"small"})))),l.a.createElement(r,null,l.a.createElement("ul",null,l.a.createElement("li",null,"Client :"),l.a.createElement("li",null,"Quantit\xe9 :"),l.a.createElement("li",null,"T.V.A :"),l.a.createElement("li",null,"Net \xe0 payer :"),l.a.createElement("li",null,"R\xe8glement :")),l.a.createElement("ul",null,l.a.createElement("li",null,e.clientDef?e.clientDef:"Non d\xe9fini"),l.a.createElement("li",null,e.total_quantite),l.a.createElement("li",null,e.total_tva," ","USD"===e.devise?"$":"Fc"),l.a.createElement("li",null,e.total_ht+e.total_tva," ","USD"===e.devise?"$":"Fc"),l.a.createElement("li",null,e.mode_payement)))):l.a.createElement(a,{style:{backgroundColor:"#f9f9f9"}},l.a.createElement(r,null,l.a.createElement(g.a,{variant:"caption"},"Ici s'affichera la facture r\xe9cemment \xe9tablie")))))}function Ha(){var e=Object(P.c)(Wt),t=Object(P.c)(Bt),a=Object(P.c)($),n=Da(),i=Object(r.useState)(""),c=Object(o.a)(i,2),u=c[0],d=c[1],m=Object(r.useState)({}),p=Object(o.a)(m,2),f=p[0],b=p[1],E=Object(r.useState)(""),h=Object(o.a)(E,2),x=h[0],j=h[1],O=Object(r.useState)(!1),y=Object(o.a)(O,2),S=y[0],k=y[1],C=Object(r.useState)("Cash"),w=Object(o.a)(C,2),N=w[0],T=(w[1],Object(r.useState)("sold\xe9")),z=Object(o.a)(T,2),A=z[0],I=(z[1],Object(r.useState)(!1)),_=Object(o.a)(I,2),q=_[0],F=_[1],R=Object(r.useState)({}),D=Object(o.a)(R,2),W=D[0],B=D[1],M=l.a.useCallback(function(){var a=wa(f,u,e,t),n=a.valid,r=a.errors;B(r),n&&!q&&k(!S)},[S,f,u,t,q,e]),V=l.a.useCallback(function(e,t){b(e),F(t)},[]),L=Object(P.b)();return Object(r.useEffect)(function(){L(Aa())},[L]),l.a.createElement("div",{className:"home-page",style:{paddingTop:55,backgroundColor:"#ededed"}},S&&l.a.createElement(Ta,{open:S,closeHandler:M,submitHandler:function(a){var r=Object(he.a)({},a);r.factureRef=n,r.clientDef=f.numero_def,r.etat_facture=A,r.mode_payement=N,r.taux=e,r.devise=t,L(ia(r)).then(function(e){var t=e.payload;t&&"success"===t.state&&(k(!1),L(qe()),L(_a.setCurrentFacture(t.facture)))})},devise:t,numFacture:n,assujetti:a}),l.a.createElement("div",{className:"facturation"},l.a.createElement(Kt,{handleChangeClient:V,setDefValue:d,autreTaxes:x,setAutreTaxes:j,clientError:W.client}),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement("div",{className:"facture-details"},l.a.createElement("div",{className:"facturation-block"},l.a.createElement("div",{className:"form-header"},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"Facturation"),l.a.createElement(g.a,{variant:"h2",className:"block-title"},"N\xb0 du document : ",n)),l.a.createElement(s.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},l.a.createElement(v.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:M},"Cr\xe9er facture"),l.a.createElement(s.a,{display:"flex",alignItems:"center"},l.a.createElement(g.a,{variant:"caption"},"Date:"," ",(new Date).toLocaleDateString("fr")))))),l.a.createElement(La,null))))}function Ua(){var e=Ra(),t=e.loading,a=e.data,n=Object(r.useState)(!1),i=Object(o.a)(n,2),c=i[0],s=i[1],d=Object(u.g)(),m=function(){d("/")};return Object(r.useEffect)(function(){var e=a.some(function(e){return e.quantite>0});s(e)},[a]),l.a.createElement(l.a.Fragment,null,t?l.a.createElement(Xe.a,{height:"80vh",display:"flex",justifyContent:"center",alignItems:"center"},l.a.createElement(it,{message:"Chargement des donn\xe9es ..."})):c?l.a.createElement(u.d,null,l.a.createElement(u.b,{path:"/",element:l.a.createElement(Ha,null)})):l.a.createElement(yt,{open:!c,title:"Alerte stock",message:"Vous n'avez aucun produit dans votre stock. Voulez-vous continuer ?",agreeBtnText:"Continuer",disagreeBtnText:"Non",onClose:m,onAgree:function(){s(!0)},onDisagree:m}))}a(790),a(791);var Qa=a(178),Ga=a.n(Qa);function Ja(){var e=Object(P.b)();return Object(r.useEffect)(function(){e(_e())},[e]),l.a.createElement("div",{className:"module-page"},l.a.createElement("header",null,l.a.createElement(Xe.a,{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#fff",padding:"5px 0",borderRadius:"5px"},l.a.createElement(g.a,{className:"module-title"},"Produits",l.a.createElement("span",{className:"small"},">> Liste des produits")),l.a.createElement(p.b,{to:"/stock/nouveau_produit"},l.a.createElement(v.a,{variant:"text",color:"primary",startIcon:l.a.createElement(Ga.a,null)},"Ajouter un produit")))),l.a.createElement("section",{className:"produits"},l.a.createElement(Xe.a,{sx:{transition:"all 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"}},l.a.createElement(nt,null))))}var $a=a(897),Xa=a(898),Ya=a(899),Ka=a(404),Za=a.n(Ka),en=a(405),tn=a.n(en),an=a(406),nn=a.n(an),rn=a(144),ln=a.n(rn),cn=a(403),on=a.n(cn);function un(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!0),c=Object(o.a)(i,2),u=c[0],s=c[1];return l.a.createElement("div",{className:"fleft-sidebar",style:{color:"#444",borderRight:"3px solid #ccc"}},l.a.createElement("div",{className:"inner-sidebar"},l.a.createElement("menu",null,l.a.createElement($a.a,{alignItems:"center",onClick:function(){return n(!a)},sx:{pr:2,"&:hover, &:focus":{}}},l.a.createElement(Xa.a,{sx:{color:"inherit",minWidth:"fit-content",marginRight:1.5,marginTop:0}},l.a.createElement(on.a,{fontSize:"small"})),l.a.createElement(Ya.a,{primary:"Produits",primaryTypographyProps:{fontSize:14,fontWeight:"medium",lineHeight:"20px",mb:"2px"},secondaryTypographyProps:{noWrap:!0,fontSize:12,lineHeight:"16px"},sx:{my:0}}),l.a.createElement(ln.a,{sx:{opacity:a?1:0,transform:a?"rotate(-180deg)":"rotate(0)",transition:"0.2s"}})),a&&l.a.createElement(Xe.a,{pl:4.5},l.a.createElement(p.c,{to:"produits",className:function(e){return e.isActive?"active-navlink":"navlink"}},l.a.createElement($a.a,null,l.a.createElement(Ya.a,{primary:"Nos produits",primaryTypographyProps:{fontSize:13,fontWeight:"medium",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},sx:{mb:0}}))),l.a.createElement(p.c,{to:"nouveau_produit",className:function(e){return e.isActive?"active-navlink":"navlink"}},l.a.createElement($a.a,null,l.a.createElement(Ya.a,{primary:"Nouveau produit",primaryTypographyProps:{fontSize:13,fontWeight:"medium",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}})))),l.a.createElement($a.a,{alignItems:"center",onClick:function(){return s(!u)},sx:{pr:2,"&:hover, &:focus":{}}},l.a.createElement(Xa.a,{sx:{color:"inherit",minWidth:"fit-content",marginRight:1.5}},l.a.createElement(Za.a,{fontSize:"small"})),l.a.createElement(Ya.a,{primary:"Approvisionnement",primaryTypographyProps:{fontSize:14,fontWeight:"medium",lineHeight:"20px",mb:"2px",textOverflow:"ellipsis",overflow:u?"hidden":"initial"},secondaryTypographyProps:{noWrap:!0,fontSize:12,lineHeight:"16px"},sx:{my:0}}),l.a.createElement(ln.a,{sx:{opacity:u?1:0,transform:u?"rotate(-180deg)":"rotate(0)",transition:"0.2s"}})),u&&l.a.createElement(Xe.a,{pl:4.5},l.a.createElement(p.c,{to:"approvisionnement",className:function(e){return e.isActive?"active-navlink":"navlink"}},l.a.createElement($a.a,null,l.a.createElement(Ya.a,{primary:"Nouvel approvisionnement",primaryTypographyProps:{fontSize:13,fontWeight:"medium",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},sx:{mb:0}}))),l.a.createElement(p.c,{to:"historique_approvisionnement",className:function(e){return e.isActive?"active-navlink":"navlink"}},l.a.createElement($a.a,null,l.a.createElement(Ya.a,{primary:"Historique",primaryTypographyProps:{fontSize:13,fontWeight:"medium",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}})))),l.a.createElement(p.c,{to:"fiche_de_stock",className:function(e){return e.isActive?"active-navlink":"navlink"}},l.a.createElement($a.a,{sx:{py:0,minHeight:40,color:"inherit"}},l.a.createElement(Xa.a,{sx:{color:"inherit",minWidth:"fit-content",marginRight:1.5}},l.a.createElement(tn.a,{fontSize:"small"})),l.a.createElement(Ya.a,{primary:"Fiche de stock",primaryTypographyProps:{fontSize:14,fontWeight:"medium"}}))),l.a.createElement(p.c,{to:"alertes",className:function(e){return e.isActive?"active-navlink":"navlink"}},l.a.createElement($a.a,{sx:{py:0,minHeight:40,color:"inherit"}},l.a.createElement(Xa.a,{sx:{color:"inherit",minWidth:"fit-content",marginRight:1.5}},l.a.createElement(nn.a,{fontSize:"small"})),l.a.createElement(Ya.a,{primary:"Alertes",primaryTypographyProps:{fontSize:14,fontWeight:"medium"}}))))))}var sn=a(885),dn=a(882),mn=a(179),pn=a.n(mn),fn=a(410),bn=a.n(fn),gn=a(860);function En(e){var t=e.open,a=e.onClose;return l.a.createElement(kt.a,{onClose:a,open:t},l.a.createElement("form",{className:"multiple-form"},l.a.createElement("div",{className:"form-header"},l.a.createElement(Xe.a,{borderBottom:"1px solid #eaeaea",mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"Ent\xe9e des produits/marchandises en stock"),l.a.createElement(b.a,{onClick:a},l.a.createElement(gn.a,{fontSize:"small"}))),l.a.createElement(v.a,{variant:"contained",disableElevation:!0,type:"submit"},"Enregistrer")),l.a.createElement("div",{className:"form-rows"},l.a.createElement("div",{className:"form-row rows-header"},l.a.createElement(pe.a,{label:"Num",id:"quantite_si",name:"quantite_si",variant:"outlined",disabled:!0,inputProps:{style:{textAlign:"right"}},sx:{minWidth:60}}),l.a.createElement(pe.a,{id:"produit",name:"produit",label:"Produit",variant:"outlined",fullWidth:!0,sx:{minWidth:300},disabled:!0}),l.a.createElement(pe.a,{id:"quantite",name:"quantite",label:"Quantit\xe9",variant:"outlined",fullWidth:!0,disabled:!0}),l.a.createElement(pe.a,{id:"cu",name:"cu",label:"C.U.",placeholder:"C.U.",variant:"outlined",fullWidth:!0,disabled:!0}),l.a.createElement(ve,{id:"exp",name:"exp",label:"Date d'expiration",variant:"outlined",fullWidth:!0,disabled:!0})),new Array(10).fill(0).map(function(e,t){return l.a.createElement(hn,{key:t,num:t+1})}))))}var vn,hn=function(e){e.setRowsHandler;var t=e.num,a=Object(r.useState)(0),n=Object(o.a)(a,2),i=n[0],c=n[1],u=Object(r.useState)(0),s=Object(o.a)(u,2),d=s[0],m=s[1],p=Object(r.useState)(),f=Object(o.a)(p,2),b=f[0],g=f[1];return l.a.createElement("div",{className:"form-row"},l.a.createElement(pe.a,{id:"quantite_si",name:"quantite_si",variant:"outlined",defaultValue:t,disabled:!0,inputProps:{style:{textAlign:"right"}},sx:{minWidth:60}}),l.a.createElement(rt,{label:!1}),l.a.createElement(pe.a,{id:"quantite_si",name:"quantite_si",placeholder:"Quantit\xe9 stock initial",variant:"outlined",fullWidth:!0,type:"number",value:i,onChange:function(e){return c(e.target.value)}}),l.a.createElement(pe.a,{id:"cu",name:"cu",placeholder:"Co\xfbt unitaire du produit",variant:"outlined",fullWidth:!0,type:"number",value:d,onChange:function(e){return m(e.target.value)}}),l.a.createElement(ve,{value:b,onChange:function(e){g(e.target.value)},id:"exp",name:"exp",placeholder:"_ _ /_ _ /20_ _",variant:"outlined",fullWidth:!0}))},xn=Object(L.c)({selectId:function(e){return e.id},sortComparer:function(e,t){return Z(e.date_emission,t.date_emission)}}),jn=xn.getInitialState({error:null,status:"idle"}),On=Object(L.b)("facture/get all",Object(V.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/entrees/factures");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))),yn=Object(L.d)({name:"facture_achat",initialState:jn,reducers:{updateteOne:function(e,t){var a=t.payload,n=a.id,r=a.attribute,l=a.value;if(n){var i=e.entities[n];if(!i)return;i[r]=l}}},extraReducers:(vn={},Object(W.a)(vn,On.pending,function(e,t){e.status="loading"}),Object(W.a)(vn,On.fulfilled,function(e,t){var a=t.payload;a&&xn.upsertMany(e,a),e.status="fulfilled"}),Object(W.a)(vn,On.rejected,function(e,t){e.status="failed"}),vn)}),Sn=yn.actions,kn=yn.reducer,Cn=xn.getSelectors(function(e){return e.facturesAchat}),wn=Cn.selectAll,Nn=(Cn.selectById,function(e){return e.facturesAchat.status}),Tn=a(407),zn=a.n(Tn),An=a(408),In=a.n(An),_n=a(861),qn=a(880),Fn=a(881),Rn=a(409),Dn=a.n(Rn);function Pn(e){var t=e.approvProduits,a=void 0===t?[]:t,n=e.numApprov,r=void 0===n?0:n,i=e.removeProduit;return l.a.createElement(Bn,null,l.a.createElement(s.a,null,l.a.createElement(Mn,null,l.a.createElement("div",null,l.a.createElement(Dn.a,{fontSize:"small"}),l.a.createElement("span",null,a.length," produits")),l.a.createElement("span",null,"N\xb0 ",r)),l.a.createElement(Vn,null,a.map(function(e,t){return l.a.createElement(Hn,{key:t},l.a.createElement(Ln,{className:"action"},l.a.createElement(Fn.a,{title:"Enlever"},l.a.createElement(b.a,{onClick:function(){return i(e)}},l.a.createElement(ta.a,{fontSize:"small"})))),l.a.createElement(Ln,{className:"fill"},e.designation),l.a.createElement(Ln,{className:"right"},e.quantite),l.a.createElement(Ln,{className:"right"},te(e.cout_u)))}))))}var Wn,Bn=Object(d.a)("div")(function(){return{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),border:"1px solid #d9d9d9",borderRadius:5,margin:"15px 0",overflow:"hidden"}}),Mn=Object(d.a)("div")(function(){return{padding:"8px 16px",backgroundColor:"#f6f8fa",borderTopLeftRadius:6,borderTopRightRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center","&>div":{display:"flex",alignItems:"center","&>*:first-of-type":{marginRight:10}}}}),Vn=Object(d.a)("div")(function(){return{}}),Ln=Object(d.a)("div")(function(){return{width:"25%",padding:"8px 10px","&.fill":{width:"35%"},"&.right":{textAlign:"right"},"&.action":{width:"15%",padding:"0 10px"}}}),Hn=Object(d.a)("div")(function(e){e.theme;return{display:"flex",alignItems:"baseline",borderTop:"1px solid #d0d7de"}}),Un=Object(L.c)({selectId:function(e){return e.id}}),Qn=Un.getInitialState({status:"idle",errors:null,count:0,numeros:[]}),Gn=Object(L.b)("entree/creer",function(){var e=Object(V.a)(M.a.mark(function e(t){var a,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.produitId,n=t.data,e.next=3,U.a.post("/api/entrees/".concat(a),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Jn=Object(L.b)("entree/creation multiple",function(){var e=Object(V.a)(M.a.mark(function e(t){var a,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,n=t.factureId,e.next=3,U.a.post("/api/entrees/facture/".concat(n),a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),$n=Object(L.b)("entree/count",Object(V.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/entrees/count");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))),Xn=Object(L.b)("entree/liste des num\xe9ro",Object(V.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/entrees/numeros");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))),Yn=Object(L.d)({name:"entrees",initialState:Qn,extraReducers:(Wn={},Object(W.a)(Wn,Gn.pending,function(e){e.status="loading"}),Object(W.a)(Wn,Gn.fulfilled,function(e,t){"success"===t.payload.state?(e.status="fulfilled",Un.upsertOne(e,t.payload.entree)):(e.status="fulfilled",e.errors=t.payload)}),Object(W.a)(Wn,Gn.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Object(W.a)(Wn,Jn.pending,function(e){e.status="loading"}),Object(W.a)(Wn,Jn.fulfilled,function(e,t){"success"===t.payload.state?(e.status="fulfilled",Un.addMany(e,t.payload.entrees)):(e.status="fulfilled",e.errors=t.payload)}),Object(W.a)(Wn,Jn.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Object(W.a)(Wn,$n.pending,function(e){e.status="loading"}),Object(W.a)(Wn,$n.fulfilled,function(e,t){t.payload&&(e.status="fulfilled",t.payload.count&&(e.count=t.payload.count))}),Object(W.a)(Wn,$n.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Wn)}),Kn=Yn.reducer,Zn=(Yn.actions,Un.getSelectors(function(e){return e.entrees})),er=Zn.selectAll,tr=(Zn.selectById,function(e){return e.entrees.status});function ar(e){var t=e.facture,a=e.handleAppendProduits,n=e.handleRemoveProduct,i=e.handleClearSelection,c=e.produistApprovisionnes,u=e.clearSelectedFacture,s=Object(P.c)(Bt),d=Object(P.c)(Wt),m=Object(P.c)(Be),p=Object(r.useState)(null),f=Object(o.a)(p,2),E=f[0],x=f[1],j=Object(r.useState)(null),O=Object(o.a)(j,2),y=O[0],S=O[1],k=Object(r.useState)(null),C=Object(o.a)(k,2),w=C[0],N=C[1],T=Boolean(E),z=l.a.useRef(),A=Object(P.b)(),I="loading"===Object(P.c)(tr),_=Object(r.useContext)(ll).createFeedback,q=Object(r.useState)(null),F=Object(o.a)(q,2),R=F[0],D=F[1],W=function(e,t){x(e.currentTarget),S(t)},B=function(){x(null),S(null),N(null)};return l.a.createElement("div",{style:{width:"100%",display:"flex"},ref:z},R&&l.a.createElement(yt,{title:"Erreur",open:!!R,message:R,onClose:function(){return D(null)},agreeBtnText:"Ok",onAgree:function(){return D(null)}}),l.a.createElement(Pa.a,{in:!0},l.a.createElement(rr,null,l.a.createElement(g.a,{variant:"h2"},"Facture #",t.reference_facture,l.a.createElement("span",{style:{float:"right"}},new Date(t.createdAt).toLocaleDateString())),l.a.createElement(lr,null,l.a.createElement(g.a,{variant:"body2"},l.a.createElement("span",null,"Fournisseur : "),l.a.createElement("span",null,t.raison_sociale_fournisseur)),l.a.createElement(g.a,{variant:"body2"},l.a.createElement("span",null,"Bon decommande : "),l.a.createElement("span",null,t.bon_commande||"Non d\xe9finit")),l.a.createElement(g.a,{variant:"body2"},l.a.createElement("span",null,"Nombre produits : "),l.a.createElement("span",null,t.produitAchetes.length)),l.a.createElement(g.a,{variant:"body2"},l.a.createElement("span",null,"Autres Frais : "),l.a.createElement("span",null,t.total_charge||0," ",t.devise))),l.a.createElement(Xe.a,{height:"calc(100vh - 265px)",minHeight:400},l.a.createElement(cr,{className:"header",in:!0},l.a.createElement("div",null,l.a.createElement(b.a,{color:"primary"},l.a.createElement(_n.a,{fontSize:"small",htmlColor:"#fff"})),l.a.createElement(g.a,{variant:"caption",className:"fill"},"Produit"),l.a.createElement(g.a,{variant:"caption",className:"right"},"Quantit\xe9"),l.a.createElement(g.a,{variant:"caption",className:"right"},"Co\xfbt U."))),l.a.createElement(ir,null,t.produitAchetes.map(function(e,a){var n=c.some(function(t){return t.id_achete===e.id});return l.a.createElement(sr,{key:"".concat(e.designation,"_").concat(a),produit:e,onClick:W,devise:t.devise,selected:n})})),T&&l.a.createElement(_t,{anchorEl:E,open:T,handleClose:B,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},l.a.createElement(ur,null,l.a.createElement(Xe.a,{pb:2},l.a.createElement(g.a,{variant:"caption",sx:{mb:1,display:"block"}},"Produit Achet\xe9"),l.a.createElement(qn.a,{label:y.designation})),l.a.createElement(h.a,null),l.a.createElement(Xe.a,{pt:2,pb:2},l.a.createElement(g.a,{variant:"caption",sx:{mb:1,display:"block"}},"Produit Approvisionn\xe9"),l.a.createElement(rt,{value:w,placeholder:"Produit *",filterSelectedOptions:!0,label:"Produit",setValue:function(e){if(y)if(e){var t=ae(y.prix_ht,y.quantite,"number"),a=t*(1+e.marge/100),n=Object(he.a)(Object(he.a)({},e),{},{pv_unitaire:a,quantite:y.quantite,cout_u:t,id_achete:y.id});N(n)}else N(e);else N(null)},options:m.map(function(e){return Object(he.a)({label:e.designation},e)})}),l.a.createElement(g.a,{variant:"caption",sx:{mb:1}},"Marge:"," ",l.a.createElement(qn.a,{sx:{minWidth:40},label:w?w.marge+"%":""})),l.a.createElement(pe.a,{label:"Prix de vente unitaire *",id:"pv",name:"pv",value:w?te(w.pv_unitaire)+t.devise:"",placeholder:"Co\xfbt unitaire du produit",variant:"outlined",disabled:!0,fullWidth:!0,helperText:"Ce prix sera utilis\xe9 lors de la vente."})),l.a.createElement(v.a,{disabled:!w,variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(){a(w),B()}},"Confirmer"),l.a.createElement(v.a,{variant:"outlined",color:"default",size:"small",sx:{ml:2},onClick:B},"Annuler")))),l.a.createElement(nr,null,l.a.createElement(pn.a,{color:"info",fontSize:"medium",sx:{mr:2}}),l.a.createElement(g.a,{sx:{fontSize:14},variant:"caption"},"Pour s\xe9lectionner un produit cliquez sa ligne dans le tableaux des produits achet\xe9s et puis choisissez le produit \xe0 approvisionner dans la boite de dialogue.")))),l.a.createElement(or,null,l.a.createElement(g.a,{variant:"h2"},"Produits Approvisionn\xe9s"),0===c.length?l.a.createElement(l.a.Fragment,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,null),l.a.createElement(Xe.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",pt:3}},l.a.createElement(v.a,{variant:"outlined",color:"default",size:"small",onClick:function(){i()}},"Annuler"),l.a.createElement(v.a,{variant:"contained",color:"primary",size:"small",disableElevation:!0,onClick:function(){!function(){var e=t.produitAchetes;if(!c||c.length<0||!e||0===e.length)return!1;var a=!0;return e.forEach(function(e){c.some(function(t){return t.id_achete===e.id})||(a=!1)}),a}()?D("Verifiez que tous les produits de la facture sont bien s\xe9lectionn\xe9s."):A(Jn({data:{devise:s,provenance:"facture",taux:d,produits:c},factureId:t.id})).then(function(e){var a=e.payload;a&&"success"===a.state&&(A(Sn.updateteOne({id:t.id,attribute:"approvisionnee",value:!0})),i(),u(),_("Enregistrement fait avec succ\xe8s !","enregistrement-entrees-facture-multiple","success"))})},sx:{ml:2,minWidth:84,height:30.75}},I?l.a.createElement(lt.a,{size:12,color:"inherit"}):"Enregistrer")),l.a.createElement(Pn,{removeProduit:n,approvProduits:c}))))}var nr=Object(xe.a)("div")(function(e){e.theme;return{position:"absolute",bottom:0,left:0,right:0,backgroundColor:"#fff",padding:"10px 20px",borderTop:"1px solid #eaeaea",display:"flex",alignItems:"baseline"}}),rr=Object(xe.a)("div")(function(){return{position:"relative",flex:2,width:"100%",minWidth:400,maxWidth:530,padding:"30px 20px"}}),lr=Object(xe.a)("div")(function(e){e.theme;return{marginBottom:20,"& > p":{fontSize:15,display:"flex","& > span":{flex:1}}}}),ir=Object(xe.a)("div")(function(){return{border:"1px solid rgb(208, 215, 222)",maxHeight:"calc(100% - 35px)",overflowY:"auto"}}),cr=Object(xe.a)(Pa.a)(function(e){var t=e.theme;return{display:"flex",alignItems:"center","&.header":{backgroundColor:t.palette.primary.main,color:t.palette.common.white},"&.body":{cursor:"pointer",transition:"background .2s","&:hover":{backgroundColor:"#dbdbdb"}},"& > *":{padding:"5px 10px"},"& > *:first-of-type":{width:"10%"},"& > .fill":{width:"30%",flex:1},"& .right":{width:"25%",textAlign:"right"},"&.body:nth-of-type(2n)":{backgroundColor:"#eaeaea"}}}),or=Object(xe.a)("div")(function(){return{flex:1,borderLeft:"2px solid #eaeaea",padding:"30px 15px"}}),ur=Object(xe.a)("div")(function(){return{backgroundColor:"#fff",padding:10}}),sr=function(e){var t=e.produit,a=e.devise,n=e.onClick,r=e.selected;return l.a.createElement(cr,{in:!0,className:"body",onClick:function(e){return r?{}:n(e,t)}},l.a.createElement("div",null,l.a.createElement(we.a,{size:"small",color:"primary",checked:r,onChange:function(e){},inputProps:{"aria-label":"select one"}}),l.a.createElement(g.a,{variant:"caption",className:"fill"},t.designation),l.a.createElement(g.a,{variant:"caption",className:"right"},t.quantite.toLocaleString("de-DE")),l.a.createElement(g.a,{variant:"caption",className:"right"},ae(t.prix_ht,t.quantite)," ",a)))};function dr(e){var t=e.open,a=e.onClose,n="loading"===Object(P.c)(Nn),i=Object(P.c)(wn).filter(function(e){return!e.approvisionnee}),c=Object(r.useState)(null),u=Object(o.a)(c,2),s=u[0],d=u[1],m=Object(r.useState)([]),p=Object(o.a)(m,2),f=p[0],E=p[1],h=function(e){d(e)},x=Object(P.b)();return Object(r.useEffect)(function(){x(On())},[x]),l.a.createElement(kt.a,{open:t,onClose:a},l.a.createElement(pr,null,0===i.length?l.a.createElement(hr,null,l.a.createElement(Xe.a,{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",alignSelf:"center",justifySelf:"center"},l.a.createElement(g.a,{variant:"h1",sx:{mb:7,fontSize:22}},"Factures d'achat non approvisionn\xe9e"),l.a.createElement("img",{style:{height:100,width:"auto"},src:In.a,alt:"Aucune facture"}),l.a.createElement(g.a,{variant:"caption",sx:{mt:2}},"Aucune facture d'achat non approvisionn\xe9e"),l.a.createElement(v.a,{variant:"contained",color:"primary",onClick:a,size:"medium",sx:{mt:4},disableElevation:!0},"Fermer"))):l.a.createElement(br,null,l.a.createElement(gr,null,l.a.createElement(fr,{justifyContent:"space-between",pl:2.5,pr:1},l.a.createElement(g.a,{variant:"h2"},"Factures d'achat non approvisionn\xe9e"),l.a.createElement(b.a,{onClick:a},l.a.createElement(gn.a,{fontSize:"small"}))),n?l.a.createElement(it,{message:"Chargement...",sx:{height:"70%"},size:20}):l.a.createElement(Er,null,i.map(function(e,t){return l.a.createElement(mr,{onSelect:h,key:"".concat(e.reference_facture,"_").concat(t),facture:e,activeId:s&&s.id})}))),l.a.createElement(vr,{className:s?"active":""},s?l.a.createElement(ar,{facture:s,produistApprovisionnes:f,handleClearSelection:function(){E([])},handleRemoveProduct:function(e){var t=f.filter(function(t){return t.id_achete!==e.id_achete});E(t)},clearSelectedFacture:function(){d(null)},handleAppendProduits:function(e){E([].concat(Object(Te.a)(f),[e]))}}):l.a.createElement(Xe.a,{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:130,alignSelf:"center",justifySelf:"center"},l.a.createElement("img",{src:zn.a,alt:"Aucune Selection"}),l.a.createElement(g.a,{variant:"caption",sx:{mt:2}},"S\xe9lectionnez une facture !"))))))}var mr=function(e){var t=e.facture,a=e.activeId,n=e.onSelect;return l.a.createElement(xr,{className:a===t.id?"active":"",onClick:function(){return n(t)}},l.a.createElement("span",{className:"activeBar"}),l.a.createElement(g.a,{sx:{fontWeight:"600",fontSize:15}},l.a.createElement("span",null,"Facture : "),l.a.createElement("span",null,t.reference_facture," ",t.sigle_fournisseur)),l.a.createElement(g.a,{variant:"body2",sx:{fontSize:14}},l.a.createElement("span",null,"Qunatit\xe9 : ",t.quantite_total)),l.a.createElement(g.a,{variant:"caption",color:"GrayText",sx:{fontSize:12,width:"100%"}},t.produitAchetes.map(function(e){return l.a.createElement("span",{key:e.designation},e.quantite," ",e.designation,","," ")})))},pr=Object(xe.a)("div")(function(){return{width:"100%",backgroundColor:"#faf8ff",overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:1200,position:"fixed",top:0,outline:"currentcolor none 0px",left:0,color:"#444"}}),fr=Object(xe.a)(Xe.a)(function(){return{display:"flex",alignItems:"center"}}),br=Object(xe.a)("div")(function(){return{display:"flex"}}),gr=Object(xe.a)(Xe.a)(function(){return{width:"300px",padding:"15px 0 15px 20px",backgroundColor:"#f0f0f0",height:"100vh",overflowY:"auto"}}),Er=Object(xe.a)("div")(function(){return{marginTop:10}}),vr=Object(xe.a)("div")(function(){return{maxWidth:1200,flex:1,display:"flex","&.active":{boxShadow:"-2px 0px 5px #2020200f"}}}),hr=Object(xe.a)("div")(function(){return{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}),xr=Object(xe.a)("div")(function(e){return{padding:"5px 10px 5px 25px",marginBottom:10,borderRadius:5,backgroundColor:"#bbbbbb45",marginRight:20,cursor:"pointer",transition:"background .1s",position:"relative",overflow:"hidden","& > p":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},"& > span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},"&:hover":{backgroundColor:"#faf8ff"},"&.active":{backgroundColor:"#faf8ff",marginRight:0,borderTopRightRadius:0,borderBottomRightRadius:0,boxShadow:"-1px 0px 0px rgba(0, 0, 0, 0.12),-1px 0px 0px rgba(0,0,0,0.14),-5px 0px 5px rgba(0,0,0,0.12)"},"&.active > .activeBar":{position:"absolute",top:0,bottom:0,left:0,backgroundColor:e.theme.palette.primary.main,width:5}}}),jr=function(e,t,a,n,r,l){var i=!0,c={};return l&&""!==l&&"3"===l[0]||(i=!1,c.numCompte="Le num\xe9ro de compte stock commence par 3"),""!==e&&e||(c.designation="La d\xe9signation du produit est r\xe9quise.",i=!1),""!==t&&t||(c.unite="La nature du produit est r\xe9quise.",i=!1),(null===a||void 0===a||a<=0)&&(c.marge="La marge b\xe9n\xe9ficiaire du produit est r\xe9quise.",i=!1),(!n||n<0)&&(c.qMin="Le stock de s\xe9curit\xe9 du produit est r\xe9quis.",i=!1),r&&""!==r||(c.code="Le code du produit est r\xe9quis.",i=!1),{valid:i,errors:c}},Or=function(e){var t=e.dateExp,a=e.quantite,n=e.cout_unitaire,r=e.taux,l=e.pv_unitaire,i=e.devise,c=e.provenance,o=e.licence_url,u=e.factureId,s=e.produit,d=!0,m={},p=[];return s&&s.id||(m.produit="S\xe9l\xe9ctionnez un produit.",d=!1),(a<0||!a)&&(m.quantite="La quantit\xe9 du produit est r\xe9quise.",d=!1),(n<0||!n)&&(m.cu="Le co\xfbt unitaire du produit est r\xe9quis.",d=!1),(l<0||!l)&&(m.pv="Le prix de vente unitaire du produit est r\xe9quis.",d=!1),(r<0||!r)&&(p.push("Le taux est r\xe9quis."),d=!1),(c<0||!c)&&(p.push("Veillez sp\xe9cifier la source de l'entr\xe9e en stock"),d=!1),"licence"!==c||o&&""!==o||(p.push("Ajouter l'image de la licence d'importation"),d=!1),"facture"!==c||u&&""!==u||(p.push("Veillez s\xe9l\xe9ctionner la facture d'achat pour ce produit."),d=!1),""!==i&&i||(p.push("Veillez s\xe9l\xe9ctionner la devise utilis\xe9e."),d=!1),""!==t&&t&&(/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]|(?:Jan|Mar|May|Jul|Aug|Oct|Dec)))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2]|(?:Jan|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec))\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)(?:0?2|(?:Feb))\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9]|(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep))|(?:1[0-2]|(?:Oct|Nov|Dec)))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/.test(t)||(m.dateExp="Mauvaise date",d=!1)),{valid:d,errors:m,defaultValueErrors:p}};function yr(){var e=Object(P.c)(Wt),t=Object(P.c)(Bt),a=Object(r.useContext)(ll).createFeedback,n=Object(P.c)(Be),i=Object(r.useState)("interne"),c=Object(o.a)(i,2),u=c[0],s=c[1],d=Object(r.useState)(null),m=Object(o.a)(d,2),b=m[0],E=m[1],h=Object(r.useState)(""),x=Object(o.a)(h,2),j=x[0],O=x[1],y=Object(r.useState)(""),S=Object(o.a)(y,2),k=S[0],C=S[1],w=Object(r.useState)(0),N=Object(o.a)(w,2),T=N[0],z=N[1],A=Object(r.useState)(),I=Object(o.a)(A,2),_=I[0],q=I[1],F=Object(r.useState)(""),R=Object(o.a)(F,2),D=R[0],W=(R[1],Object(r.useState)(!1)),B=Object(o.a)(W,2),M=B[0],V=B[1],L=Object(r.useState)(!1),H=Object(o.a)(L,2),U=H[0],Q=H[1],G=Object(r.useState)({}),J=Object(o.a)(G,2),$=J[0],X=J[1],Y=Object(r.useState)([]),K=Object(o.a)(Y,2),Z=K[0],ee=K[1],te=Object(r.useState)(!1),ae=Object(o.a)(te,2),ne=ae[0],re=ae[1],le=Object(r.useState)(""),ie=Object(o.a)(le,2),ce=ie[0],oe=ie[1],ue=Object(f.a)(),se=Object(P.b)(),de=Object(r.useCallback)(function(){E(null),O(""),C(""),z(""),oe(""),X({}),ee([])},[]),me=function(){V(!M)},fe=Object(r.useCallback)(function(){Q(!U)},[U]),be=Object(r.useCallback)(function(e){E(e),e&&z(e.marge)},[]);return Object(r.useEffect)(function(){0===n.length&&se(_e())},[se,n]),l.a.createElement("form",{className:"form-approv",onSubmit:function(n){if(n.preventDefault(),!ne){var r={date_exp:_,num_entree:"",quantite:+j,cout_unitaire:+k,pv_unitaire:ce,taux:+e,devise:t,provenance:u,licence_url:D},l=Or(Object(he.a)(Object(he.a)({},r),{},{produit:b})),i=l.errors,c=l.defaultValueErrors;if(!l.valid)return X(i),void ee(c);re(!0),se(Gn({produitId:b.id,data:r})).then(function(e){e.payload&&"success"===e.payload.state&&(de(),a("Enregistrement fait avec succ\xe8s !","enregistrement-entrees","success"))}).finally(function(){return re(!1)})}}},l.a.createElement("header",null,l.a.createElement(g.a,{className:"module-title"},"Approvisionnement"," ",l.a.createElement("span",{className:"small"},">> Entr\xe9e des produits en stock")),l.a.createElement(p.b,{to:"/stock/historique_approvisionnement"},l.a.createElement(v.a,{color:"primary",variant:"text",size:"medium",startIcon:l.a.createElement(bn.a,null)},"Voir l'historique des entr\xe9es"))),U&&l.a.createElement(En,{open:U,onClose:fe}),M&&l.a.createElement(dr,{open:M,onClose:me}),l.a.createElement("div",{className:"form-body horizontal-align"},l.a.createElement("div",{className:"form-block"},Z.length>0&&l.a.createElement(Ft.a,{severity:"error",color:"error",variant:"standard",sx:{fontSize:13}},Z.map(function(e,t){return l.a.createElement("span",{key:t},e,l.a.createElement("br",null))})),l.a.createElement(g.a,{variant:"h2",className:"block-title"},"Provenance"),l.a.createElement(g.a,{variant:"caption",className:"small helper-text"},"Sp\xe9cifiez la provenance des produits/articles"),l.a.createElement(sn.a,{component:"fieldset",style:{display:"block"}},l.a.createElement(dn.a,{"aria-label":"provenance",name:"provenance des produits ou marchandises",value:u,onChange:function(e){return s(e.target.value)}},l.a.createElement("div",{style:{margin:ue.spacing(0,0,1.5,0)}},l.a.createElement(Et,{value:"licence",label:"A partir d'une licence d'importation",sx:{fontSize:15}}),l.a.createElement("label",{htmlFor:"licence",className:"file-input decale-20 ".concat("licence"!==u&&"disabled"),disabled:"licence"!==u},l.a.createElement("input",{id:"licence",name:"licence",type:"file",disabled:"licence"!==u,style:{visibility:"hidden",display:"none"}}),"Shoisir un fichier")),l.a.createElement("div",{style:{margin:ue.spacing(0,0,1.5,0)}},l.a.createElement(Et,{value:"facture",label:"A partir d'une facture d'achat"}),l.a.createElement(v.a,{variant:"outlined",color:"default",className:"decale-20",disabled:"facture"!==u,sx:{borderRadius:0,mt:1,display:"flex"},onClick:me},"S\xe9lectionnez la facture")),l.a.createElement(Et,{value:"interne",label:"Productions internes"}))),l.a.createElement(Lt,null)),l.a.createElement("div",{className:"form-block"},l.a.createElement(Xe.a,{display:"flex",justifyContent:"space-between",alignItems:"baseline",mb:2},l.a.createElement(g.a,{variant:"h2",className:"block-title",sx:{mb:"0!important"}},"Produits/Articles ",l.a.createElement("span",{className:"small helper-text"},">> Production interne")),l.a.createElement(p.b,{to:"/stock/nouveau_produit"},l.a.createElement(v.a,{variant:"text",color:"primary",size:"small",startIcon:l.a.createElement(Ga.a,null)},"Nouveau produit"))),l.a.createElement("div",null,l.a.createElement("div",{className:"horizontal-align",style:{marginBottom:15}},l.a.createElement(rt,{value:b,placeholder:"Produit",filterSelectedOptions:!0,label:"Produit",setValue:be,disabled:"interne"!==u,options:n.map(function(e){return{id:e.id,label:e.designation,marge:e.marge}}),error:!!$.produit,helperText:$.produit}),l.a.createElement(pe.a,{label:"Marge *",id:"marge",name:"marge",placeholder:"Marge de b\xe9n\xe9fice sur une unit\xe9",variant:"outlined",fullWidth:!0,disabled:!0,style:{maxWidth:100},value:"".concat(T,"%"),onChange:function(e){return z(e.target.value)},error:!!$.marge,helperText:$.marge})),l.a.createElement("div",{className:"horizontal-align",style:{marginBottom:15}},l.a.createElement(pe.a,{label:"Quantit\xe9 *",id:"quantite_si",name:"quantite_si",placeholder:"Quantit\xe9 stock initial",variant:"outlined",fullWidth:!0,disabled:"interne"!==u,type:"number",value:j,onChange:function(e){return O(e.target.value)},error:!!$.quantite,helperText:$.quantite}),l.a.createElement(pe.a,{label:"Co\xfbt unitaire *",id:"cu",name:"cu",placeholder:"Co\xfbt unitaire du produit",variant:"outlined",disabled:!b,fullWidth:!0,type:"number",value:k,onChange:function(e){var t=e.target.value;C(t),oe((t=+t)?Math.floor(t*(1+b.marge/100)):"")},error:!!$.cu,helperText:$.cu})),l.a.createElement("div",{className:"horizontal-align",style:{marginBottom:15}},l.a.createElement(pe.a,{label:"Prix de vente unitaire *",id:"pv",name:"pv",placeholder:"Co\xfbt unitaire du produit",variant:"outlined",fullWidth:!0,disabled:!b,type:"number",value:ce,onChange:function(e){return oe(e.target.value)},error:!!$.pv,helperText:$.pv}),l.a.createElement(ve,{label:"Date d'expiration",value:_,onChange:function(e){q(e.target.value)},id:"exp",name:"exp",disabled:!b,placeholder:"jj/mm/aaaa",variant:"outlined",fullWidth:!0,error:!!$.dateExp,helperText:$.dateExp}))),l.a.createElement("div",{className:"form-actions"},l.a.createElement(v.a,{variant:"contained",disableElevation:!0,type:"submit",disabled:"interne"!==u,sx:{minWidth:113.19,height:36.5}},ne?l.a.createElement(lt.a,{size:12,color:"inherit"}):"Enregistrer"),l.a.createElement(v.a,{variant:"text",color:"primary",disableElevation:!0,sx:{ml:1},onClick:fe,disabled:"interne"!==u},"Enregistrement multiple")),l.a.createElement("div",{style:{marginTop:15}},l.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:1.5}},l.a.createElement(pn.a,{fontSize:"small",color:"default",style:{marginRight:5}}),l.a.createElement(g.a,{variant:"caption",className:"small"},"Utilisez la touche tabulation pour passer de champs \xe0 champs.")),l.a.createElement(g.a,{variant:"caption",className:"small"},"(*) veut dire que le champs est r\xe9quis.")))))}var Sr,kr=a(417),Cr=Object(xe.a)(ye.a)(function(e){var t,a=e.theme;return t={},Object(W.a)(t,"&.".concat(Se.a.head),{backgroundColor:"#307ecc",color:a.palette.common.white,fontSize:15,padding:"7px 10px"}),Object(W.a)(t,"&.".concat(Se.a.body),{fontSize:14,padding:"7px 10px"}),t}),wr=Object(xe.a)(Ne.a)(function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}});function Nr(){var e=Object(f.a)(),t=Object(P.c)(er);return r.createElement(ke.a,{component:kr.a,style:{boxShadow:"rgb(0 0 0 / 20%) 0px 1px 3px -2px, rgb(0 0 0 / 14%) 0px 1px 2px 0px, rgb(213 213 213 / 12%) 0px -1px 1px 0px"}},r.createElement(je.a,{sx:{minWidth:700},"aria-label":"customized table"},r.createElement(Ce.a,null,r.createElement(Ne.a,null,r.createElement(Cr,{padding:"checkbox"},r.createElement(we.a,{color:"warning",inputProps:{"aria-label":"select all desserts"}})),r.createElement(Cr,{align:"right"},"N\xb0"),r.createElement(Cr,null,"entree/marchandises"),r.createElement(Cr,null,"Code"),r.createElement(Cr,null,"Nature"),r.createElement(Cr,{align:"right"},"Quantit\xe9"),r.createElement(Cr,{align:"right"},"C.U."),r.createElement(Cr,{align:"right"},"C.T."))),r.createElement(Oe.a,null,t&&t.map(function(t,a){return r.createElement(wr,{key:t.id},r.createElement(Cr,{padding:"checkbox"},r.createElement(we.a,{size:"small",color:"primary",inputProps:{"aria-label":"select all desserts"}})),r.createElement(Cr,{align:"right"},a+1),r.createElement(Cr,{style:{color:e.palette.primary.main},component:"th",scope:"row"},t.produit.designation),r.createElement(Cr,null,t.produit.code_produit),r.createElement(Cr,null,t.produit.unite),r.createElement(Cr,{align:"right"},t.quantite_entree),r.createElement(Cr,{align:"right"},t.cout_unitaire),r.createElement(Cr,{align:"right"},parseFloat(t.cout_unitaire)*parseFloat(t.quantite_entree)))}),r.createElement(wr,{style:{height:35}},r.createElement(Cr,{align:"left"}),r.createElement(Cr,{align:"center"}),r.createElement(Cr,null),r.createElement(Cr,null),r.createElement(Cr,{align:"right"}),r.createElement(Cr,{align:"right"}),r.createElement(Cr,{align:"right"}),r.createElement(Cr,{align:"right"})))))}var Tr=Object(L.c)({selectId:function(e){return e.id}}),zr=Tr.getInitialState({status:"idle",errors:null,currentStock:null,stockPrincipal:null}),Ar=Object(L.b)("stocks/get-for-entreprise",function(){var e=Object(V.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/stock/"+t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Ir=Object(L.b)("stocks/get-one",function(){var e=Object(V.a)(M.a.mark(function e(t,a){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("/api/stock/"+t+"/"+a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),_r=Object(L.b)("stocks/creer",function(){var e=Object(V.a)(M.a.mark(function e(t){var a,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.eseId,n=t.data,e.next=3,U.a.post("/api/stock/"+a,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),qr=Object(L.d)({name:"stock",initialState:zr,reducers:{ajouterProduit:function(e,t){var a=t.payload;e.produits=[].concat(Object(Te.a)(e.produits),[Object(he.a)({id:e.produits.length+1},a)])}},extraReducers:(Sr={},Object(W.a)(Sr,Ar.pending,function(e){e.status="loading"}),Object(W.a)(Sr,Ar.fulfilled,function(e,t){e.status="fulfilled",Tr.upsertMany(e,t.payload);var a=t.payload.find(function(e){return"1"===e.num_stock});e.stockPrincipal=a}),Object(W.a)(Sr,Ar.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Object(W.a)(Sr,Ir.pending,function(e,t){e.status="loading"}),Object(W.a)(Sr,Ir.fulfilled,function(e,t){e.status="fulfilled",e.currentStock=t.payload}),Object(W.a)(Sr,Ir.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Object(W.a)(Sr,_r.pending,function(e){e.status="loading"}),Object(W.a)(Sr,_r.fulfilled,function(e,t){"success"===t.payload.state?(e.status="fulfilled",Tr.upsertOne(e,t.payload.stock)):(e.status="fulfilled",e.errors=t.payload)}),Object(W.a)(Sr,_r.rejected,function(e,t){e.status="failed",e.errors=t.payload}),Sr)}),Fr=qr.reducer,Rr=(qr.actions,Tr.getSelectors(function(e){return e.stocks})),Dr=(Rr.selectAll,Rr.selectById,function(e){return e.stocks.stockPrincipal});function Pr(){var e=Object(P.c)(Dr),t=Object(P.b)();return Object(r.useEffect)(function(){e&&t(Xn())},[t,e]),l.a.createElement("div",{className:"approv-container"},l.a.createElement(yr,null),l.a.createElement(s.a,{mt:2,p:"0 10px"},l.a.createElement(Nr,null)))}function Wr(){return l.a.createElement("div",{className:"module-page"},l.a.createElement("header",null,l.a.createElement(g.a,{className:"module-title"},"Fiche de stock ",l.a.createElement("span",{className:"small"},">> Les mouvement de stock"))))}var Br=a(863),Mr=a(864),Vr=a(862),Lr=a(242),Hr=a.n(Lr),Ur=Object(xe.a)("form")(function(){return{backgroundColor:"#fff",height:"100%",width:300,padding:20}}),Qr=Object(xe.a)("div")(function(){return{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15,"& > h1":{fontSize:17}}});function Gr(e){var t=e.open,a=e.onClose,n=Object(r.useState)(""),i=Object(o.a)(n,2),c=i[0],u=i[1],d=Object(r.useState)(""),m=Object(o.a)(d,2),p=m[0],f=m[1],E=Object(r.useState)(""),h=Object(o.a)(E,2),x=h[0],j=h[1],O=Object(r.useState)({}),y=Object(o.a)(O,2),S=y[0],k=y[1],C=Object(r.useState)(!1),w=Object(o.a)(C,2),N=w[0],T=w[1],z=l.a.useRef(),A=function(){u(""),f(""),j(""),k({}),T(!1)},I=function(e,t){switch(k(Object(he.a)(Object(he.a)({},S),{},Object(W.a)({},t,null))),t){case"nom":u(e);break;case"code":f(e);break;case"description":j(e)}},_=function(){a(),A()},q=function(e,t){var a=!0;return""===e&&(a=!1,k(Object(he.a)(Object(he.a)({},S),{},{nom:"La valeur est r\xe9quise"}))),""===t&&(a=!1,k(Object(he.a)(Object(he.a)({},S),{},{nom:"La valeur est r\xe9quise"}))),a},F=Object(P.b)(),R=function(){var e=Object(V.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),q(c,p)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,T(!0),e.next=8,U.a.post("/api/produits/categories",{nom:c,code:p,description:x});case 8:a=e.sent,n=a.data,console.log(n),"success"===n.state&&(F(Pe.appendCategorie(n.categorie)),A()),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0),T(!1),S.server="Une erreur s'est produite lors de l'enregistrement";case 19:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(kt.a,{open:t,onClose:_},l.a.createElement(Ur,{onSubmit:R},S.server>0&&l.a.createElement(Ft.a,{severity:"error",color:"error",variant:"standard",sx:{fontSize:13}},S.server),l.a.createElement(Qr,null,l.a.createElement(g.a,{variant:"h1"},"Nouvelle cat\xe9gorie de produit"),l.a.createElement(b.a,{onClick:_},l.a.createElement(Hr.a,{size:"small"}))),l.a.createElement(pe.a,{inputRef:z,label:"Nom de la cat\xe9gorie *",id:"categorie",name:"categorie",placeholder:"Cat\xe9gorie des produits",variant:"outlined",fullWidth:!0,type:"text",value:c,onChange:function(e){return I(e.target.value,"nom")},error:!!S.nom,helperText:S.nom}),l.a.createElement(pe.a,{inputRef:z,label:"Code de la cat\xe9gorie *",id:"categorie",name:"categorie",placeholder:"Code des produits",variant:"outlined",fullWidth:!0,type:"text",value:p,onChange:function(e){return I(e.target.value,"code")},error:!!S.code,helperText:S.code}),l.a.createElement(s.a,{mt:2},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"D\xe9scripton"),l.a.createElement(pe.a,{id:"description",name:"description",placeholder:"Une petite description du produit",variant:"outlined",fullWidth:!0,multiline:!0,value:x,onChange:function(e){return I(e.target.value,"description")},rows:4,error:!!S.description,helperText:S.description})),l.a.createElement("div",{className:"form-actions"},l.a.createElement("div",{className:"horizontal-align"},l.a.createElement(v.a,{variant:"outlined",color:"default",size:"medium",disableElevation:!0,sx:{mr:2},onClick:_},"Annuler"),l.a.createElement(v.a,{variant:"contained",color:"primary",size:"medium",disableElevation:!0,type:"sumbit",sx:{minWidth:124.78,height:36.5}},N?l.a.createElement(lt.a,{size:12,color:"inherit"}):"Enregistrer")))))}function Jr(e){var t=e.taxes,a=void 0===t?[]:t,n=e.handleDelete;return l.a.createElement(Vr.a,{direction:"row",spacing:1,sx:{mb:2}},a.map(function(e){return l.a.createElement(qn.a,{key:e.label,label:"".concat(e.label," : ").concat(e.pourcentage,"%"),variant:"outlined",color:"primary",onDelete:function(){return n(e.label)}})}))}function $r(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(""),c=Object(o.a)(i,2),u=c[0],d=c[1],m=Object(r.useState)(0),f=Object(o.a)(m,2),b=f[0],E=f[1],h=Object(r.useState)(0),x=Object(o.a)(h,2),j=x[0],O=x[1],y=Object(r.useState)(""),S=Object(o.a)(y,2),k=S[0],C=S[1],w=Object(r.useState)(""),N=Object(o.a)(w,2),T=N[0],z=N[1],A=Object(r.useState)(""),I=Object(o.a)(A,2),_=I[0],q=I[1],F=Object(r.useState)(null),R=Object(o.a)(F,2),D=R[0],W=R[1],B=Object(r.useState)("31"),M=Object(o.a)(B,2),V=M[0],L=M[1],H=Object(r.useState)(""),U=Object(o.a)(H,2),Q=U[0],G=U[1],J=Object(r.useState)(""),$=Object(o.a)(J,2),X=$[0],Y=$[1],K=Object(r.useState)([]),Z=Object(o.a)(K,2),ee=Z[0],te=Z[1],ae=Object(r.useState)(!1),ne=Object(o.a)(ae,2),re=ne[0],le=ne[1],ie=Object(r.useState)({}),ce=Object(o.a)(ie,2),oe=ce[0],ue=ce[1],se=Object(r.useState)(!1),de=Object(o.a)(se,2),me=de[0],fe=de[1],be=Object(P.c)(Me),ge=Object(P.c)(Ve),Ee=Object(r.useRef)(),ve=function(){fe(!me)},xe=function(e,t){switch(t){case"designation":n(e),ue(Object(he.a)(Object(he.a)({},oe),{},{designation:null}));break;case"code":C(e),ue(Object(he.a)(Object(he.a)({},oe),{},{code:null}));break;case"qMin":O(e),null===j&&""===j||ue(Object(he.a)(Object(he.a)({},oe),{},{qMin:null}));break;case"unite":d(e),ue(Object(he.a)(Object(he.a)({},oe),{},{unite:null}));break;case"marge":case"emballage":E(e),ue(Object(he.a)(Object(he.a)({},oe),{},{marge:null}));break;case"taxeNom":G(e),ue(Object(he.a)(Object(he.a)({},oe),{},{taxeNom:null}));break;case"taxeValue":Y(e),ue(Object(he.a)(Object(he.a)({},oe),{},{taxeValue:null}));break;case"numCompte":L(e),ue(Object(he.a)(Object(he.a)({},oe),{},{numCompte:null}));break;case"categorie":W(e),ue(Object(he.a)(Object(he.a)({},oe),{},{categorie:null}));break;default:return}},je=Object(P.b)(),Oe=function(){ue(Object(he.a)(Object(he.a)({},oe),{},{server:null})),je(Pe.initError())};return Object(r.useEffect)(function(){ue(Object(he.a)(Object(he.a)({},oe),{},{server:be}))},[be]),Object(r.useEffect)(function(){je(Ie())},[je]),l.a.createElement(l.a.Fragment,null,me&&l.a.createElement(Gr,{onClose:ve,open:me}),l.a.createElement("form",{className:"produit-form",onSubmit:function(e){if(e.preventDefault(),!re){var t=jr(a,u,b,j,k,V),r=t.valid,l=t.errors;if(r){le(!0);var i={designation:a,code_produit:k,description:T,emballage:_,unite:u,marge:b,taxes:ee,quantite:0,q_min:j,categorieId:D?D.id:null};je(Fe({data:i})).then(function(e){"success"===e.payload.state&&(n(""),d(""),O(""),E(0),C(""),z(""),W(null),te([]),G(""),Y(""),L("31"),q(""),Ee.current&&Ee.current.focus())}).finally(function(){return le(!1)})}else ue(l)}}},oe.server&&l.a.createElement(yt,{title:"Erreur",open:!!be,message:oe.server,onAgree:Oe,onClose:Oe,agreeBtnText:"Ok"}),l.a.createElement("header",null,l.a.createElement(g.a,{variant:"h1"},"Ajout des nouveaux produits/Articles"),l.a.createElement(p.c,{to:"/stock/produits",className:function(e){return e.isActive?"active-navlink":"navlink"}},l.a.createElement(v.a,{variant:"text",startIcon:l.a.createElement(Br.a,null),color:"primary"},"Liste des produits"))),l.a.createElement("div",null,l.a.createElement("div",{className:"form-block"},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"1. G\xe9n\xe9ralit\xe9s"),l.a.createElement("div",null,l.a.createElement(pe.a,{inputRef:Ee,label:"D\xe9signation du produit *",id:"designation",name:"designation",placeholder:"D\xe9signation du produit",variant:"outlined",fullWidth:!0,type:"text",value:a,onChange:function(e){return xe(e.target.value,"designation")},error:!!oe.designation,helperText:oe.designation}),l.a.createElement("div",{className:"horizontal-align"},l.a.createElement(pe.a,{label:"Code Produit *",id:"code",name:"code",placeholder:"Code du produit",variant:"outlined",fullWidth:!0,type:"text",value:k,onChange:function(e){return xe(e.target.value,"code")},error:!!oe.code,helperText:oe.code}),l.a.createElement(pe.a,{label:"Quantit\xe9 minimale *",id:"q_min",name:"q_min",placeholder:"Quantit\xe9 minimale",variant:"outlined",fullWidth:!0,type:"number",value:j,onChange:function(e){return xe(e.target.value,"qMin")},error:!!oe.qMin,helperText:oe.qMin})),l.a.createElement("div",{className:"horizontal-align"},l.a.createElement(pe.a,{label:"Unit\xe9 de m\xe9sure du produit *",id:"unite",name:"unite",placeholder:"Unit\xe9 de m\xe9sure du produit",variant:"outlined",type:"text",fullWidth:!0,value:u,onChange:function(e){return xe(e.target.value,"unite")},error:!!oe.unite,helperText:oe.unite}),l.a.createElement(pe.a,{label:"Marge de b\xe9n\xe9fice sur une unit\xe9 (%) *",id:"marge",name:"marge",placeholder:"Marge de b\xe9n\xe9fice sur une unit\xe9",variant:"outlined",fullWidth:!0,type:"number",value:b,onChange:function(e){return xe(e.target.value,"marge")},error:!!oe.marge,helperText:oe.marge})),l.a.createElement(pe.a,{label:"L'emballage du produit (Conteneur)",id:"emballage",name:"emballage",placeholder:"L'emballage du produit",variant:"outlined",fullWidth:!0,type:"text",value:_,onChange:function(e){return xe(e.target.value,"emballage")}}),l.a.createElement(s.a,{mt:2},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"D\xe9scripton"),l.a.createElement(pe.a,{id:"description",name:"description",placeholder:"Une petite description du produit",variant:"outlined",fullWidth:!0,multiline:!0,value:T,onChange:function(e){return xe(e.target.value,"description")},rows:4,error:!!oe.description,helperText:oe.description})))),l.a.createElement("div",{className:"form-block"},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"2. Cat\xe9gorie du produit (gamme)"),l.a.createElement("div",null,l.a.createElement(rt,{label:"Cat\xe9gorie *",id:"Cat\xe9gorie",name:"Cat\xe9gorie",placeholder:"Cat\xe9gorie",variant:"outlined",type:"text",fullWidth:!0,options:ge.map(function(e){return Object(he.a)({label:e.nom_categorie},e)})||[],value:D,setValue:function(e){return W(e)},sx:{display:"block"}}),l.a.createElement(v.a,{variant:"outlined",color:"primary",size:"medium",onClick:ve},"Nouvelle cat\xe9gorie"))),l.a.createElement("div",{className:"form-block"},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"3. Autres donn\xe9es"),l.a.createElement("div",null,l.a.createElement(pe.a,{label:"Num\xe9ro de compte stock *",placeholder:"Num\xe9ro de compte stock",name:"compte",id:"compte",inputProps:{maxLength:8},variant:"outlined",value:V,onChange:function(e){var t=e.target.value;""===t||"3"!==t[0]?ue(Object(he.a)(Object(he.a)({},oe),{},{numCompte:"Mauvais num\xe9ro de compte"})):ue(Object(he.a)(Object(he.a)({},oe),{},{numCompte:null})),L(t)},error:!!oe.numCompte,helperText:oe.numCompte}),l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(g.a,{variant:"h2",className:"block-title"},"Autres taxes li\xe9es"),ee.length>0&&l.a.createElement(Jr,{taxes:ee,handleDelete:function(e){var t=ee.filter(function(t){return t.label!==e});te(t)}}),l.a.createElement(s.a,{display:"flex",alignItems:"flex-start"},l.a.createElement(pe.a,{label:"Nom de la taxe",id:"nom_taxe",name:"nom_taxe",placeholder:"Taxe",variant:"outlined",type:"text",sx:{display:"block",mr:1,my:0},value:Q,onChange:function(e){return xe(e.target.value,"taxeNom")},error:!!oe.taxeNom,helperText:oe.taxeNom}),l.a.createElement(pe.a,{label:"Valeur (%)",id:"taxe",name:"taxe",placeholder:"Taxe",variant:"outlined",type:"number",inputProps:{maxLength:5,minLength:0},sx:{display:"block",mr:1,my:0},value:X,onChange:function(e){return xe(e.target.value,"taxeValue")},error:!!oe.taxeValue,helperText:oe.taxeValue}),l.a.createElement(v.a,{variant:"outlined",color:"primary",size:"medium",startIcon:l.a.createElement(Mr.a,null),onClick:function(){var e=!0,t=Object(he.a)({},oe);""===Q&&(e=!1,t.taxeNom="Valeure r\xe9quise."),""===X&&(e=!1,t.taxeValue="Valeure r\xe9quise."),ee.some(function(e){return e.label===Q})&&(e=!1),e?(te([].concat(Object(Te.a)(ee),[{label:Q,pourcentage:X}])),G(""),Y("")):ue(t)}},"Ajouter")))))),l.a.createElement("div",{className:"form-actions"},l.a.createElement("div",{className:"horizontal-align"},l.a.createElement(v.a,{variant:"outlined",color:"default",size:"medium",disableElevation:!0,sx:{mr:2}},"Annuler"),l.a.createElement(v.a,{variant:"contained",color:"primary",size:"medium",disableElevation:!0,type:"sumbit",sx:{minWidth:124.78,height:36.5}},re?l.a.createElement(lt.a,{size:12,color:"inherit"}):"Enregistrer")))))}var Xr=a(900),Yr=a(411),Kr=a.n(Yr);function Zr(e,t,a,n,r,l){return{name:e,calories:t,fat:a,carbs:n,protein:r,price:l,history:[{date:"2020-01-05",customerId:"11091700",amount:3},{date:"2020-01-02",customerId:"Anonymous",amount:1}]}}function el(e){var t=e.row,a=r.useState(!1),n=Object(o.a)(a,2),l=n[0],i=n[1];return r.createElement(r.Fragment,null,r.createElement(Ne.a,{sx:{"& > *":{borderBottom:"unset"}}},r.createElement(ye.a,null,r.createElement(b.a,{"aria-label":"expand row",size:"small",onClick:function(){return i(!l)}},l?r.createElement(Kr.a,null):r.createElement(ln.a,null))),r.createElement(ye.a,{component:"th",scope:"row"},t.name),r.createElement(ye.a,{align:"right"},t.calories),r.createElement(ye.a,{align:"right"},t.fat),r.createElement(ye.a,{align:"right"},t.carbs),r.createElement(ye.a,{align:"right"},t.protein)),r.createElement(Ne.a,null,r.createElement(ye.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},r.createElement(Xr.a,{in:l,timeout:"auto",unmountOnExit:!0},r.createElement(s.a,{sx:{margin:1}},r.createElement(g.a,{variant:"h6",gutterBottom:!0,component:"div"},"History"),r.createElement(je.a,{size:"small","aria-label":"purchases"},r.createElement(Ce.a,null,r.createElement(Ne.a,null,r.createElement(ye.a,null,"Date"),r.createElement(ye.a,null,"Customer"),r.createElement(ye.a,{align:"right"},"Amount"),r.createElement(ye.a,{align:"right"},"Total price ($)"))),r.createElement(Oe.a,null,t.history.map(function(e){return r.createElement(Ne.a,{key:e.date},r.createElement(ye.a,{component:"th",scope:"row"},e.date),r.createElement(ye.a,null,e.customerId),r.createElement(ye.a,{align:"right"},e.amount),r.createElement(ye.a,{align:"right"},Math.round(e.amount*t.price*100)/100))}))))))))}var tl=[Zr("Frozen yoghurt",159,6,24,4,3.99),Zr("Ice cream sandwich",237,9,37,4.3,4.99),Zr("Eclair",262,16,24,6,3.79),Zr("Cupcake",305,3.7,67,4.3,2.5),Zr("Gingerbread",356,16,49,3.9,1.5)];function al(){return r.createElement(ke.a,{component:kr.a},r.createElement(je.a,{"aria-label":"collapsible table"},r.createElement(Ce.a,null,r.createElement(Ne.a,null,r.createElement(ye.a,null),r.createElement(ye.a,null,"Dessert (100g serving)"),r.createElement(ye.a,{align:"right"},"Calories"),r.createElement(ye.a,{align:"right"},"Fat\xa0(g)"),r.createElement(ye.a,{align:"right"},"Carbs\xa0(g)"),r.createElement(ye.a,{align:"right"},"Protein\xa0(g)"))),r.createElement(Oe.a,null,tl.map(function(e){return r.createElement(el,{key:e.name,row:e})}))))}a(866),a(865),a(867);function nl(){return l.a.createElement("div",{className:"historique-page"},l.a.createElement("header",null,l.a.createElement(s.a,{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#fff",padding:"5px 15px",borderRadius:"5px"},l.a.createElement(g.a,{className:"module-title"},"Historique des entr\xe9es"),l.a.createElement(p.b,{to:"/stock/nouveau_produit"},l.a.createElement(v.a,{variant:"text",color:"primary"},"Ajouter un produit")))),l.a.createElement("div",null,l.a.createElement(al,null)))}function rl(){return l.a.createElement("div",null,l.a.createElement(un,null),l.a.createElement("main",{className:"main-stock"},l.a.createElement(u.d,null,l.a.createElement(u.b,{path:"/produits",element:l.a.createElement(Ja,null)}),l.a.createElement(u.b,{path:"/nouveau_produit",element:l.a.createElement($r,null)}),l.a.createElement(u.b,{path:"approvisionnement",element:l.a.createElement(Pr,null)}),l.a.createElement(u.b,{path:"/historique_approvisionnement",element:l.a.createElement(nl,null)}),l.a.createElement(u.b,{path:"fiche_de_stock",element:l.a.createElement(Wr,null)}),l.a.createElement(u.b,{path:"/",element:l.a.createElement(Ja,null)}))))}var ll=Object(r.createContext)({});var il=function(){var e="loading"===Object(P.c)(K),t=Object(P.c)(Y),a=Object(P.b)(),n=Object(r.useState)(!1),i=Object(o.a)(n,2),c=i[0],s=i[1],d=Object(r.useState)(""),m=Object(o.a)(d,2),p=m[0],f=m[1],b=Object(r.useState)(),g=Object(o.a)(b,2),E=g[0],v=g[1],h=Object(r.useState)("global-feed-back"),x=Object(o.a)(h,2),j=x[0],O=x[1],y={onClose:function(){s(!1),f("")},createFeedback:function(e,t,a){s(!0),f(e),O(t),v(a)},getFeedback:function(){return{messageState:p,openState:c,idState:j,typeState:E}}};return Object(r.useEffect)(function(){a(Q()).then(function(e){var t=e.payload;if(!t||!t.connected){var a=ee();window.location.href=a}})},[a]),l.a.createElement(l.a.Fragment,null,e||!t?l.a.createElement(it,{message:"Chargement...",sx:{minHeight:"100vh"}}):l.a.createElement(ll.Provider,{value:y},l.a.createElement("div",null,l.a.createElement(ne,null),l.a.createElement(u.d,null,l.a.createElement(u.b,{path:"/stock/*",element:l.a.createElement(rl,null)}),l.a.createElement(u.b,{path:"/facturation/*",element:l.a.createElement(Ua,null)}),l.a.createElement(u.b,{path:"/facture/:numFacture",element:l.a.createElement(Ct,null)}),l.a.createElement(u.b,{path:"*",element:l.a.createElement(u.a,{to:"/stock"})}))),l.a.createElement(Rt,null)))},cl=Object(L.a)({reducer:{produits:De,entrees:Kn,stocks:Fr,ventes:ua,assujetti:J,factures:qa,facturesAchat:kn,configs:Pt}}),ol=a(251),ul=Object(ol.a)({typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),title:{fontSize:"clamp(3.625rem, 1.2857rem + 3.5714vw, 4rem)"},h1:{fontSize:"1.3rem",fontWeight:"400"},h2:{fontSize:"1rem",fontWeight:"400",marginBottom:"10px!important"},h3:{fontSize:28},h4:{fontSize:26},h5:{fontSize:24},h6:{fontSize:22},body1:{fontSize:20},body2:{fontSize:18},caption:{fontSize:16}}}),sl=Object(ol.a)({palette:{primary:{main:"#307ECC",light:"#6FAED9",dark:"#0b222f"},secondary:{main:"#fd7e14"},default:{main:"#555",light:"#B6B6B6",dark:"#333"},blackish:{main:"#001320",light:"#00406c"},background:{main:"#E4E6E9"}},typography:ul.typography,components:{MuiButton:{defaultProps:{size:"medium"},styleOverrides:{root:{borderRadius:5,textTransform:"initial"}}},MuiTextField:{defaultProps:{size:"small"},styleOverrides:{root:{fontSize:14,borderRadius:0,margin:"5px 0 10px 0"}}},MuiInputLabel:{styleOverrides:{root:{fontSize:15}}},MuiOutlinedInput:{styleOverrides:{root:{borderRadius:3},input:{fontSize:15}}},MuiPaper:{defaultProps:{elevation:3}},MuiTableContainer:{styleOverrides:{root:{borderRadius:3,boxShadow:"none"}}},MuiFormHelperText:{styleOverrides:{root:{fontSize:10}}},MuiCheckbox:{defaultProps:{size:"small"},styleOverrides:{root:{padding:0}}},MuiRadio:{defaultProps:{size:"small"},styleOverrides:{root:{padding:0}}},MuiFormControlLabel:{styleOverrides:{root:{marginLeft:0},label:{fontSize:16,marginLeft:5}}},MuiBackdrop:{styleOverrides:{root:{background:"#00000042"}}}}}),dl=a(902);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(P.a,{store:cl},l.a.createElement(dl.a,{theme:sl},l.a.createElement(p.a,null,l.a.createElement(il,null))))),document.getElementById("root"))}},[[445,1,2]]]);
//# sourceMappingURL=main.eb1e3294.chunk.js.map